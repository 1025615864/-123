百姓法律助手 - 前端视觉与交互升级方案
一、设计系统重构
1.1 品牌色彩系统
TypeScript

// frontend/src/styles/design-tokens.ts

export const colors = {
  // 主色调 - 法律蓝（专业、信任）
  primary: {
    50: '#eff6ff',
    100: '#dbeafe',
    200: '#bfdbfe',
    300: '#93c5fd',
    400: '#60a5fa',
    500: '#3b82f6',  // 主色
    600: '#2563eb',
    700: '#1d4ed8',
    800: '#1e40af',
    900: '#1e3a8a',
    950: '#172554',
  },
  
  // 辅助色 - 正义金（温暖、公正）
  accent: {
    50: '#fffbeb',
    100: '#fef3c7',
    200: '#fde68a',
    300: '#fcd34d',
    400: '#fbbf24',
    500: '#f59e0b',  // 辅助色
    600: '#d97706',
    700: '#b45309',
  },
  
  // 语义色
  semantic: {
    success: '#10b981',
    warning: '#f59e0b',
    error: '#ef4444',
    info: '#3b82f6',
  },
  
  // 中性色
  neutral: {
    50: '#fafafa',
    100: '#f4f4f5',
    200: '#e4e4e7',
    300: '#d4d4d8',
    400: '#a1a1aa',
    500: '#71717a',
    600: '#52525b',
    700: '#3f3f46',
    800: '#27272a',
    900: '#18181b',
    950: '#09090b',
  },
  
  // 渐变
  gradients: {
    primary: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
    hero: 'linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #60a5fa 100%)',
    card: 'linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%)',
    glass: 'linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)',
    sunset: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
    ocean: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
  },
};

// Tailwind 配置扩展
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      colors: {
        primary: colors.primary,
        accent: colors.accent,
      },
      backgroundImage: {
        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
        'gradient-hero': colors.gradients.hero,
        'glass': colors.gradients.glass,
      },
      animation: {
        'float': 'float 6s ease-in-out infinite',
        'glow': 'glow 2s ease-in-out infinite alternate',
        'shimmer': 'shimmer 2s linear infinite',
        'slide-up': 'slideUp 0.5s ease-out',
        'slide-down': 'slideDown 0.3s ease-out',
        'fade-in': 'fadeIn 0.5s ease-out',
        'scale-in': 'scaleIn 0.3s ease-out',
        'bounce-soft': 'bounceSoft 2s infinite',
      },
      keyframes: {
        float: {
          '0%, 100%': { transform: 'translateY(0)' },
          '50%': { transform: 'translateY(-20px)' },
        },
        glow: {
          '0%': { boxShadow: '0 0 5px #3b82f6, 0 0 10px #3b82f6' },
          '100%': { boxShadow: '0 0 20px #3b82f6, 0 0 30px #3b82f6' },
        },
        shimmer: {
          '0%': { backgroundPosition: '-200% 0' },
          '100%': { backgroundPosition: '200% 0' },
        },
        slideUp: {
          '0%': { opacity: 0, transform: 'translateY(20px)' },
          '100%': { opacity: 1, transform: 'translateY(0)' },
        },
        fadeIn: {
          '0%': { opacity: 0 },
          '100%': { opacity: 1 },
        },
        scaleIn: {
          '0%': { opacity: 0, transform: 'scale(0.9)' },
          '100%': { opacity: 1, transform: 'scale(1)' },
        },
        bounceSoft: {
          '0%, 100%': { transform: 'translateY(0)' },
          '50%': { transform: 'translateY(-10px)' },
        },
      },
      boxShadow: {
        'glow': '0 0 20px rgba(59, 130, 246, 0.5)',
        'glow-lg': '0 0 40px rgba(59, 130, 246, 0.4)',
        'inner-glow': 'inset 0 0 20px rgba(59, 130, 246, 0.1)',
        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
        'card-hover': '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
        'elevated': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
      },
    },
  },
};
1.2 玻璃态 + 新拟态组件基础
React

// frontend/src/components/ui/GlassCard.tsx

import { motion } from 'framer-motion';
import { cn } from '@/lib/utils';

interface GlassCardProps {
  children: React.ReactNode;
  className?: string;
  hover?: boolean;
  blur?: 'sm' | 'md' | 'lg' | 'xl';
  variant?: 'light' | 'dark' | 'primary';
}

export const GlassCard: React.FC<GlassCardProps> = ({
  children,
  className,
  hover = true,
  blur = 'md',
  variant = 'light',
}) => {
  const blurMap = {
    sm: 'backdrop-blur-sm',
    md: 'backdrop-blur-md',
    lg: 'backdrop-blur-lg',
    xl: 'backdrop-blur-xl',
  };

  const variantStyles = {
    light: 'bg-white/70 border-white/20',
    dark: 'bg-gray-900/70 border-gray-700/30',
    primary: 'bg-blue-500/10 border-blue-500/20',
  };

  return (
    <motion.div
      className={cn(
        'rounded-2xl border shadow-card',
        blurMap[blur],
        variantStyles[variant],
        hover && 'transition-all duration-300 hover:shadow-card-hover hover:-translate-y-1',
        className
      )}
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.4, ease: 'easeOut' }}
    >
      {children}
    </motion.div>
  );
};


// 新拟态按钮
// frontend/src/components/ui/NeumorphicButton.tsx

interface NeumorphicButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'raised' | 'pressed' | 'flat';
  size?: 'sm' | 'md' | 'lg';
  icon?: React.ReactNode;
  loading?: boolean;
}

export const NeumorphicButton: React.FC<NeumorphicButtonProps> = ({
  children,
  variant = 'raised',
  size = 'md',
  icon,
  loading,
  className,
  ...props
}) => {
  const sizeStyles = {
    sm: 'px-4 py-2 text-sm',
    md: 'px-6 py-3 text-base',
    lg: 'px-8 py-4 text-lg',
  };

  const variantStyles = {
    raised: `
      bg-gradient-to-br from-gray-100 to-gray-200
      shadow-[6px_6px_12px_#c5c5c5,-6px_-6px_12px_#ffffff]
      hover:shadow-[4px_4px_8px_#c5c5c5,-4px_-4px_8px_#ffffff]
      active:shadow-[inset_4px_4px_8px_#c5c5c5,inset_-4px_-4px_8px_#ffffff]
    `,
    pressed: `
      bg-gradient-to-br from-gray-100 to-gray-200
      shadow-[inset_4px_4px_8px_#c5c5c5,inset_-4px_-4px_8px_#ffffff]
    `,
    flat: `
      bg-gray-100
      hover:bg-gray-200
      active:shadow-[inset_2px_2px_4px_#c5c5c5,inset_-2px_-2px_4px_#ffffff]
    `,
  };

  return (
    <motion.button
      whileHover={{ scale: 1.02 }}
      whileTap={{ scale: 0.98 }}
      className={cn(
        'rounded-xl font-medium transition-all duration-200',
        'flex items-center justify-center gap-2',
        sizeStyles[size],
        variantStyles[variant],
        className
      )}
      disabled={loading}
      {...props}
    >
      {loading ? (
        <motion.div
          animate={{ rotate: 360 }}
          transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}
          className="w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full"
        />
      ) : (
        <>
          {icon}
          {children}
        </>
      )}
    </motion.button>
  );
};
二、首页/落地页设计
2.1 震撼的 Hero 区域
React

// frontend/src/components/home/HeroSection.tsx

import { motion, useScroll, useTransform } from 'framer-motion';
import { useRef } from 'react';
import { Scale, MessageSquare, Shield, ArrowRight, Sparkles } from 'lucide-react';

export const HeroSection: React.FC = () => {
  const containerRef = useRef<HTMLDivElement>(null);
  const { scrollYProgress } = useScroll({
    target: containerRef,
    offset: ['start start', 'end start'],
  });

  const y = useTransform(scrollYProgress, [0, 1], ['0%', '50%']);
  const opacity = useTransform(scrollYProgress, [0, 0.5], [1, 0]);
  const scale = useTransform(scrollYProgress, [0, 0.5], [1, 0.8]);

  return (
    <section
      ref={containerRef}
      className="relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900"
    >
      {/* 动态背景 */}
      <div className="absolute inset-0">
        {/* 网格背景 */}
        <div 
          className="absolute inset-0 opacity-20"
          style={{
            backgroundImage: `
              linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px),
              linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px)
            `,
            backgroundSize: '50px 50px',
          }}
        />
        
        {/* 光晕效果 */}
        <motion.div
          className="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/30 rounded-full blur-[100px]"
          animate={{
            scale: [1, 1.2, 1],
            opacity: [0.3, 0.5, 0.3],
          }}
          transition={{
            duration: 8,
            repeat: Infinity,
            ease: 'easeInOut',
          }}
        />
        <motion.div
          className="absolute bottom-1/4 right-1/4 w-80 h-80 bg-purple-500/20 rounded-full blur-[80px]"
          animate={{
            scale: [1.2, 1, 1.2],
            opacity: [0.2, 0.4, 0.2],
          }}
          transition={{
            duration: 10,
            repeat: Infinity,
            ease: 'easeInOut',
          }}
        />

        {/* 浮动粒子 */}
        <FloatingParticles />
      </div>

      {/* 主内容 */}
      <motion.div
        style={{ y, opacity, scale }}
        className="relative z-10 flex flex-col items-center justify-center min-h-screen px-4 text-center"
      >
        {/* 标签 */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.2 }}
          className="mb-6"
        >
          <span className="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-300 bg-blue-500/10 border border-blue-500/20 rounded-full backdrop-blur-sm">
            <Sparkles className="w-4 h-4" />
            AI 驱动的智能法律助手
          </span>
        </motion.div>

        {/* 主标题 */}
        <motion.h1
          initial={{ opacity: 0, y: 30 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.4 }}
          className="text-5xl md:text-7xl font-bold text-white mb-6 leading-tight"
        >
          <span className="block">让法律</span>
          <span className="block bg-gradient-to-r from-blue-400 via-cyan-400 to-purple-400 bg-clip-text text-transparent">
            触手可及
          </span>
        </motion.h1>

        {/* 副标题 */}
        <motion.p
          initial={{ opacity: 0, y: 30 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.6 }}
          className="text-xl text-gray-300 mb-10 max-w-2xl"
        >
          百姓法律助手为您提供 24/7 全天候智能法律咨询服务，
          <br />
          专业、快速、可靠，让法律不再遥不可及
        </motion.p>

        {/* CTA 按钮 */}
        <motion.div
          initial={{ opacity: 0, y: 30 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.8 }}
          className="flex flex-col sm:flex-row gap-4"
        >
          <motion.button
            whileHover={{ scale: 1.05, boxShadow: '0 0 30px rgba(59, 130, 246, 0.5)' }}
            whileTap={{ scale: 0.95 }}
            className="group relative px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-500 text-white font-semibold rounded-xl overflow-hidden"
          >
            <span className="relative z-10 flex items-center gap-2">
              开始免费咨询
              <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
            </span>
            {/* 光泽效果 */}
            <motion.div
              className="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent"
              initial={{ x: '-100%' }}
              whileHover={{ x: '100%' }}
              transition={{ duration: 0.6 }}
            />
          </motion.button>

          <motion.button
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 0.95 }}
            className="px-8 py-4 border border-gray-600 text-gray-300 font-semibold rounded-xl hover:bg-white/5 transition-colors"
          >
            了解更多
          </motion.button>
        </motion.div>

        {/* 统计数据 */}
        <motion.div
          initial={{ opacity: 0, y: 40 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 1 }}
          className="mt-20 grid grid-cols-3 gap-8 md:gap-16"
        >
          {[
            { value: '100万+', label: '服务用户' },
            { value: '50万+', label: '咨询解答' },
            { value: '99.9%', label: '满意度' },
          ].map((stat, i) => (
            <div key={i} className="text-center">
              <motion.div
                initial={{ scale: 0 }}
                animate={{ scale: 1 }}
                transition={{ delay: 1.2 + i * 0.1, type: 'spring' }}
                className="text-3xl md:text-4xl font-bold text-white mb-2"
              >
                {stat.value}
              </motion.div>
              <div className="text-gray-400 text-sm">{stat.label}</div>
            </div>
          ))}
        </motion.div>
      </motion.div>

      {/* 向下滚动提示 */}
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ delay: 1.5 }}
        className="absolute bottom-8 left-1/2 -translate-x-1/2"
      >
        <motion.div
          animate={{ y: [0, 10, 0] }}
          transition={{ duration: 2, repeat: Infinity }}
          className="w-6 h-10 border-2 border-gray-500 rounded-full flex justify-center pt-2"
        >
          <motion.div
            animate={{ opacity: [1, 0, 1], y: [0, 12, 0] }}
            transition={{ duration: 2, repeat: Infinity }}
            className="w-1.5 h-1.5 bg-gray-400 rounded-full"
          />
        </motion.div>
      </motion.div>
    </section>
  );
};


// 浮动粒子组件
const FloatingParticles: React.FC = () => {
  const particles = Array.from({ length: 50 }, (_, i) => ({
    id: i,
    x: Math.random() * 100,
    y: Math.random() * 100,
    size: Math.random() * 4 + 1,
    duration: Math.random() * 20 + 10,
    delay: Math.random() * 5,
  }));

  return (
    <div className="absolute inset-0 overflow-hidden">
      {particles.map((particle) => (
        <motion.div
          key={particle.id}
          className="absolute rounded-full bg-white/10"
          style={{
            left: `${particle.x}%`,
            top: `${particle.y}%`,
            width: particle.size,
            height: particle.size,
          }}
          animate={{
            y: [0, -30, 0],
            opacity: [0.2, 0.5, 0.2],
          }}
          transition={{
            duration: particle.duration,
            delay: particle.delay,
            repeat: Infinity,
            ease: 'easeInOut',
          }}
        />
      ))}
    </div>
  );
};
2.2 功能特性展示区
React

// frontend/src/components/home/FeaturesSection.tsx

import { motion, useInView } from 'framer-motion';
import { useRef } from 'react';
import { 
  MessageSquare, Scale, Shield, Clock, 
  Users, FileText, Sparkles, Zap 
} from 'lucide-react';

const features = [
  {
    icon: MessageSquare,
    title: 'AI 智能咨询',
    description: '基于大语言模型，24小时在线解答法律疑问，快速、准确、专业',
    color: 'from-blue-500 to-cyan-500',
    delay: 0,
  },
  {
    icon: Scale,
    title: '法律知识库',
    description: '海量法律法规、案例文书，一键检索，智能关联',
    color: 'from-purple-500 to-pink-500',
    delay: 0.1,
  },
  {
    icon: Shield,
    title: '隐私保护',
    description: '端到端加密，严格保护您的咨询内容和个人隐私',
    color: 'from-green-500 to-emerald-500',
    delay: 0.2,
  },
  {
    icon: Users,
    title: '律师对接',
    description: '精选合作律师，一键预约咨询，线上线下无缝衔接',
    color: 'from-orange-500 to-amber-500',
    delay: 0.3,
  },
  {
    icon: FileText,
    title: '文书生成',
    description: '智能生成法律文书模板，专业规范，省时省力',
    color: 'from-red-500 to-rose-500',
    delay: 0.4,
  },
  {
    icon: Clock,
    title: '时效提醒',
    description: '诉讼时效自动计算，关键日期提醒，不错过任何期限',
    color: 'from-indigo-500 to-violet-500',
    delay: 0.5,
  },
];

export const FeaturesSection: React.FC = () => {
  const containerRef = useRef<HTMLDivElement>(null);
  const isInView = useInView(containerRef, { once: true, margin: '-100px' });

  return (
    <section ref={containerRef} className="py-24 bg-gray-50 dark:bg-gray-900">
      <div className="container mx-auto px-4">
        {/* 标题 */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={isInView ? { opacity: 1, y: 0 } : {}}
          transition={{ duration: 0.6 }}
          className="text-center mb-16"
        >
          <span className="inline-block px-4 py-1 mb-4 text-sm font-medium text-blue-600 bg-blue-100 dark:bg-blue-900/30 rounded-full">
            核心功能
          </span>
          <h2 className="text-4xl font-bold text-gray-900 dark:text-white mb-4">
            为您提供全方位的法律服务
          </h2>
          <p className="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
            整合 AI 技术与法律专业知识，打造智能、便捷、可靠的法律服务平台
          </p>
        </motion.div>

        {/* 功能卡片网格 */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {features.map((feature, index) => (
            <FeatureCard key={index} {...feature} isInView={isInView} />
          ))}
        </div>
      </div>
    </section>
  );
};

const FeatureCard: React.FC<{
  icon: React.ComponentType<{ className?: string }>;
  title: string;
  description: string;
  color: string;
  delay: number;
  isInView: boolean;
}> = ({ icon: Icon, title, description, color, delay, isInView }) => {
  return (
    <motion.div
      initial={{ opacity: 0, y: 30 }}
      animate={isInView ? { opacity: 1, y: 0 } : {}}
      transition={{ duration: 0.5, delay }}
      whileHover={{ y: -8, transition: { duration: 0.2 } }}
      className="group relative"
    >
      <div className="relative p-8 bg-white dark:bg-gray-800 rounded-2xl shadow-card hover:shadow-card-hover transition-all duration-300 overflow-hidden">
        {/* 背景装饰 */}
        <div className="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-700 dark:to-gray-800 rounded-full -translate-y-16 translate-x-16 group-hover:scale-150 transition-transform duration-500" />
        
        {/* 图标 */}
        <div className={`relative w-14 h-14 rounded-xl bg-gradient-to-br ${color} flex items-center justify-center mb-6 shadow-lg`}>
          <Icon className="w-7 h-7 text-white" />
        </div>

        {/* 内容 */}
        <h3 className="relative text-xl font-semibold text-gray-900 dark:text-white mb-3">
          {title}
        </h3>
        <p className="relative text-gray-600 dark:text-gray-400 leading-relaxed">
          {description}
        </p>

        {/* 悬停时的光效 */}
        <motion.div
          className={`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${color}`}
          initial={{ scaleX: 0 }}
          whileHover={{ scaleX: 1 }}
          transition={{ duration: 0.3 }}
          style={{ originX: 0 }}
        />
      </div>
    </motion.div>
  );
};
2.3 动态数据展示
React

// frontend/src/components/home/StatsSection.tsx

import { motion, useInView, useSpring, useTransform } from 'framer-motion';
import { useRef, useEffect, useState } from 'react';

const stats = [
  { value: 1000000, suffix: '+', label: '累计服务用户', prefix: '' },
  { value: 500000, suffix: '+', label: '咨询问题解答', prefix: '' },
  { value: 10000, suffix: '+', label: '合作律师律所', prefix: '' },
  { value: 99.9, suffix: '%', label: '用户满意度', prefix: '' },
];

export const StatsSection: React.FC = () => {
  const containerRef = useRef<HTMLDivElement>(null);
  const isInView = useInView(containerRef, { once: true, margin: '-100px' });

  return (
    <section 
      ref={containerRef}
      className="relative py-20 bg-gradient-to-r from-blue-600 to-blue-700 overflow-hidden"
    >
      {/* 背景图案 */}
      <div className="absolute inset-0 opacity-10">
        <svg className="w-full h-full" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
              <path d="M 40 0 L 0 0 0 40" fill="none" stroke="white" strokeWidth="1"/>
            </pattern>
          </defs>
          <rect width="100%" height="100%" fill="url(#grid)" />
        </svg>
      </div>

      <div className="container relative mx-auto px-4">
        <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
          {stats.map((stat, index) => (
            <motion.div
              key={index}
              initial={{ opacity: 0, y: 20 }}
              animate={isInView ? { opacity: 1, y: 0 } : {}}
              transition={{ delay: index * 0.1, duration: 0.5 }}
              className="text-center"
            >
              <AnimatedNumber
                value={stat.value}
                suffix={stat.suffix}
                prefix={stat.prefix}
                isInView={isInView}
              />
              <p className="text-blue-100 mt-2">{stat.label}</p>
            </motion.div>
          ))}
        </div>
      </div>
    </section>
  );
};

// 数字动画组件
const AnimatedNumber: React.FC<{
  value: number;
  suffix: string;
  prefix: string;
  isInView: boolean;
}> = ({ value, suffix, prefix, isInView }) => {
  const [displayValue, setDisplayValue] = useState(0);

  useEffect(() => {
    if (!isInView) return;

    const duration = 2000;
    const steps = 60;
    const stepDuration = duration / steps;
    const increment = value / steps;
    let current = 0;

    const timer = setInterval(() => {
      current += increment;
      if (current >= value) {
        setDisplayValue(value);
        clearInterval(timer);
      } else {
        setDisplayValue(Math.floor(current));
      }
    }, stepDuration);

    return () => clearInterval(timer);
  }, [isInView, value]);

  const formatNumber = (num: number) => {
    if (num >= 1000000) {
      return (num / 1000000).toFixed(0) + '00万';
    }
    if (num >= 10000) {
      return (num / 10000).toFixed(0) + '万';
    }
    if (num >= 1000) {
      return (num / 1000).toFixed(1) + 'k';
    }
    return num.toFixed(num % 1 === 0 ? 0 : 1);
  };

  return (
    <div className="text-4xl md:text-5xl font-bold text-white">
      {prefix}
      {formatNumber(displayValue)}
      {suffix}
    </div>
  );
};
三、AI 咨询页面设计
3.1 现代化聊天界面
React

// frontend/src/pages/ChatPage.tsx

import { useState, useRef, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { 
  Send, Mic, Paperclip, Sparkles, RotateCcw, 
  ThumbsUp, ThumbsDown, Copy, Share2, MoreVertical,
  ChevronDown, Bot, User, Scale
} from 'lucide-react';

export const ChatPage: React.FC = () => {
  const [messages, setMessages] = useState<Message[]>([]);
  const [input, setInput] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const [showScrollButton, setShowScrollButton] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);
  const chatContainerRef = useRef<HTMLDivElement>(null);

  return (
    <div className="flex h-screen bg-gray-50 dark:bg-gray-900">
      {/* 侧边栏 - 历史记录 */}
      <ChatSidebar />

      {/* 主聊天区域 */}
      <div className="flex-1 flex flex-col">
        {/* 顶部栏 */}
        <ChatHeader />

        {/* 消息区域 */}
        <div
          ref={chatContainerRef}
          className="flex-1 overflow-y-auto px-4 py-6"
          onScroll={handleScroll}
        >
          <div className="max-w-3xl mx-auto space-y-6">
            {/* 欢迎消息 */}
            {messages.length === 0 && <WelcomeMessage />}

            {/* 消息列表 */}
            <AnimatePresence mode="popLayout">
              {messages.map((message) => (
                <MessageBubble key={message.id} message={message} />
              ))}
            </AnimatePresence>

            {/* AI 正在输入 */}
            {isTyping && <TypingIndicator />}

            <div ref={messagesEndRef} />
          </div>
        </div>

        {/* 滚动到底部按钮 */}
        <AnimatePresence>
          {showScrollButton && (
            <motion.button
              initial={{ opacity: 0, y: 10 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, y: 10 }}
              onClick={scrollToBottom}
              className="absolute bottom-24 right-8 p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
            >
              <ChevronDown className="w-5 h-5" />
            </motion.button>
          )}
        </AnimatePresence>

        {/* 输入区域 */}
        <ChatInput
          value={input}
          onChange={setInput}
          onSend={handleSend}
          isLoading={isTyping}
        />
      </div>
    </div>
  );
};


// 欢迎消息组件
const WelcomeMessage: React.FC = () => {
  const suggestions = [
    '劳动合同纠纷怎么处理？',
    '交通事故责任如何认定？',
    '离婚财产怎么分割？',
    '借款不还怎么起诉？',
  ];

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      className="text-center py-12"
    >
      {/* AI 头像 */}
      <motion.div
        initial={{ scale: 0 }}
        animate={{ scale: 1 }}
        transition={{ type: 'spring', delay: 0.2 }}
        className="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg"
      >
        <Scale className="w-10 h-10 text-white" />
      </motion.div>

      <h2 className="text-2xl font-bold text-gray-900 dark:text-white mb-2">
        您好，我是法律助手小白
      </h2>
      <p className="text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto">
        我可以帮您解答法律疑问、分析案情、推荐律师。请描述您的问题，我会尽力帮助您。
      </p>

      {/* 快捷问题 */}
      <div className="flex flex-wrap justify-center gap-3">
        {suggestions.map((suggestion, i) => (
          <motion.button
            key={i}
            initial={{ opacity: 0, y: 10 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.4 + i * 0.1 }}
            whileHover={{ scale: 1.05, y: -2 }}
            whileTap={{ scale: 0.95 }}
            className="px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-sm text-gray-700 dark:text-gray-300 hover:border-blue-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors shadow-sm"
          >
            {suggestion}
          </motion.button>
        ))}
      </div>
    </motion.div>
  );
};


// 消息气泡组件
const MessageBubble: React.FC<{ message: Message }> = ({ message }) => {
  const isUser = message.role === 'user';
  const [isHovered, setIsHovered] = useState(false);

  return (
    <motion.div
      layout
      initial={{ opacity: 0, y: 20, scale: 0.95 }}
      animate={{ opacity: 1, y: 0, scale: 1 }}
      exit={{ opacity: 0, scale: 0.95 }}
      transition={{ duration: 0.3 }}
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
      className={`flex gap-4 ${isUser ? 'flex-row-reverse' : ''}`}
    >
      {/* 头像 */}
      <motion.div
        initial={{ scale: 0 }}
        animate={{ scale: 1 }}
        transition={{ type: 'spring', delay: 0.1 }}
        className={`flex-shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${
          isUser
            ? 'bg-gradient-to-br from-blue-500 to-blue-600'
            : 'bg-gradient-to-br from-purple-500 to-purple-600'
        }`}
      >
        {isUser ? (
          <User className="w-5 h-5 text-white" />
        ) : (
          <Bot className="w-5 h-5 text-white" />
        )}
      </motion.div>

      {/* 消息内容 */}
      <div className={`flex-1 max-w-[80%] ${isUser ? 'text-right' : ''}`}>
        <div
          className={`inline-block p-4 rounded-2xl ${
            isUser
              ? 'bg-blue-600 text-white rounded-tr-sm'
              : 'bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-100 dark:border-gray-700 rounded-tl-sm shadow-sm'
          }`}
        >
          {/* 消息文本 */}
          <div className="prose prose-sm dark:prose-invert max-w-none">
            {message.content}
          </div>

          {/* 法条引用 */}
          {!isUser && message.references && message.references.length > 0 && (
            <div className="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
              <p className="text-xs text-gray-500 dark:text-gray-400 mb-2 flex items-center gap-1">
                <Scale className="w-3 h-3" />
                相关法条
              </p>
              <div className="space-y-2">
                {message.references.map((ref, i) => (
                  <LawReferenceCard key={i} reference={ref} />
                ))}
              </div>
            </div>
          )}
        </div>

        {/* 操作按钮 */}
        <AnimatePresence>
          {isHovered && !isUser && (
            <motion.div
              initial={{ opacity: 0, y: -10 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, y: -10 }}
              className="flex items-center gap-2 mt-2"
            >
              <ActionButton icon={<ThumbsUp className="w-4 h-4" />} tooltip="有帮助" />
              <ActionButton icon={<ThumbsDown className="w-4 h-4" />} tooltip="没帮助" />
              <ActionButton icon={<Copy className="w-4 h-4" />} tooltip="复制" />
              <ActionButton icon={<RotateCcw className="w-4 h-4" />} tooltip="重新生成" />
              <ActionButton icon={<Share2 className="w-4 h-4" />} tooltip="分享" />
            </motion.div>
          )}
        </AnimatePresence>
      </div>
    </motion.div>
  );
};


// 法条引用卡片
const LawReferenceCard: React.FC<{ reference: LawReference }> = ({ reference }) => {
  const [isExpanded, setIsExpanded] = useState(false);

  return (
    <motion.div
      layout
      onClick={() => setIsExpanded(!isExpanded)}
      className="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors"
    >
      <div className="flex items-center justify-between">
        <span className="text-sm font-medium text-blue-700 dark:text-blue-300">
          《{reference.lawName}》第{reference.articleNumber}条
        </span>
        <motion.div
          animate={{ rotate: isExpanded ? 180 : 0 }}
          transition={{ duration: 0.2 }}
        >
          <ChevronDown className="w-4 h-4 text-blue-500" />
        </motion.div>
      </div>
      
      <AnimatePresence>
        {isExpanded && (
          <motion.div
            initial={{ height: 0, opacity: 0 }}
            animate={{ height: 'auto', opacity: 1 }}
            exit={{ height: 0, opacity: 0 }}
            transition={{ duration: 0.2 }}
            className="overflow-hidden"
          >
            <p className="mt-2 text-xs text-gray-600 dark:text-gray-400 leading-relaxed">
              {reference.content}
            </p>
          </motion.div>
        )}
      </AnimatePresence>
    </motion.div>
  );
};


// AI 正在输入指示器
const TypingIndicator: React.FC = () => {
  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      className="flex gap-4"
    >
      <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center">
        <Bot className="w-5 h-5 text-white" />
      </div>
      <div className="bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-2xl rounded-tl-sm p-4 shadow-sm">
        <div className="flex items-center gap-2">
          <motion.span
            className="w-2 h-2 bg-gray-400 rounded-full"
            animate={{ scale: [1, 1.2, 1] }}
            transition={{ duration: 0.6, repeat: Infinity, delay: 0 }}
          />
          <motion.span
            className="w-2 h-2 bg-gray-400 rounded-full"
            animate={{ scale: [1, 1.2, 1] }}
            transition={{ duration: 0.6, repeat: Infinity, delay: 0.2 }}
          />
          <motion.span
            className="w-2 h-2 bg-gray-400 rounded-full"
            animate={{ scale: [1, 1.2, 1] }}
            transition={{ duration: 0.6, repeat: Infinity, delay: 0.4 }}
          />
          <span className="ml-2 text-sm text-gray-500">AI 正在思考...</span>
        </div>
      </div>
    </motion.div>
  );
};


// 输入区域组件
const ChatInput: React.FC<{
  value: string;
  onChange: (value: string) => void;
  onSend: () => void;
  isLoading: boolean;
}> = ({ value, onChange, onSend, isLoading }) => {
  const textareaRef = useRef<HTMLTextAreaElement>(null);

  // 自动调整高度
  useEffect(() => {
    if (textareaRef.current) {
      textareaRef.current.style.height = 'auto';
      textareaRef.current.style.height = `${Math.min(textareaRef.current.scrollHeight, 200)}px`;
    }
  }, [value]);

  const handleKeyDown = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      if (value.trim() && !isLoading) {
        onSend();
      }
    }
  };

  return (
    <div className="border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4">
      <div className="max-w-3xl mx-auto">
        <div className="relative flex items-end gap-3 bg-gray-50 dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 p-3 focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-500/20 transition-all">
          {/* 附件按钮 */}
          <button className="flex-shrink-0 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors">
            <Paperclip className="w-5 h-5" />
          </button>

          {/* 输入框 */}
          <textarea
            ref={textareaRef}
            value={value}
            onChange={(e) => onChange(e.target.value)}
            onKeyDown={handleKeyDown}
            placeholder="描述您的法律问题..."
            rows={1}
            className="flex-1 bg-transparent border-none outline-none resize-none text-gray-900 dark:text-white placeholder-gray-400 max-h-[200px]"
          />

          {/* 语音输入按钮 */}
          <button className="flex-shrink-0 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors">
            <Mic className="w-5 h-5" />
          </button>

          {/* 发送按钮 */}
          <motion.button
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 0.95 }}
            onClick={onSend}
            disabled={!value.trim() || isLoading}
            className={`flex-shrink-0 p-2 rounded-lg transition-all ${
              value.trim() && !isLoading
                ? 'bg-blue-600 text-white hover:bg-blue-700'
                : 'bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed'
            }`}
          >
            {isLoading ? (
              <motion.div
                animate={{ rotate: 360 }}
                transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}
              >
                <Sparkles className="w-5 h-5" />
              </motion.div>
            ) : (
              <Send className="w-5 h-5" />
            )}
          </motion.button>
        </div>

        {/* 提示文字 */}
        <p className="text-xs text-gray-400 mt-2 text-center">
          AI 回答仅供参考，具体法律问题请咨询专业律师
        </p>
      </div>
    </div>
  );
};
3.2 流式打字效果
React

// frontend/src/components/chat/StreamingText.tsx

import { useState, useEffect, useRef } from 'react';
import { motion } from 'framer-motion';

interface StreamingTextProps {
  text: string;
  speed?: number;
  onComplete?: () => void;
}

export const StreamingText: React.FC<StreamingTextProps> = ({
  text,
  speed = 30,
  onComplete,
}) => {
  const [displayedText, setDisplayedText] = useState('');
  const [isComplete, setIsComplete] = useState(false);
  const indexRef = useRef(0);

  useEffect(() => {
    if (indexRef.current >= text.length) {
      setIsComplete(true);
      onComplete?.();
      return;
    }

    const timer = setTimeout(() => {
      setDisplayedText(text.slice(0, indexRef.current + 1));
      indexRef.current += 1;
    }, speed);

    return () => clearTimeout(timer);
  }, [displayedText, text, speed, onComplete]);

  // 重置
  useEffect(() => {
    indexRef.current = 0;
    setDisplayedText('');
    setIsComplete(false);
  }, [text]);

  return (
    <span>
      {displayedText}
      {!isComplete && (
        <motion.span
          animate={{ opacity: [1, 0, 1] }}
          transition={{ duration: 0.8, repeat: Infinity }}
          className="inline-block w-2 h-5 bg-current ml-0.5"
        />
      )}
    </span>
  );
};


// 带 Markdown 渲染的流式文本
import ReactMarkdown from 'react-markdown';
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';
import { oneDark } from 'react-syntax-highlighter/dist/esm/styles/prism';

export const StreamingMarkdown: React.FC<{
  content: string;
  isStreaming: boolean;
}> = ({ content, isStreaming }) => {
  return (
    <div className="prose prose-sm dark:prose-invert max-w-none">
      <ReactMarkdown
        components={{
          code({ node, inline, className, children, ...props }) {
            const match = /language-(\w+)/.exec(className || '');
            return !inline && match ? (
              <SyntaxHighlighter
                style={oneDark}
                language={match[1]}
                PreTag="div"
                className="rounded-lg !mt-2 !mb-2"
                {...props}
              >
                {String(children).replace(/\n$/, '')}
              </SyntaxHighlighter>
            ) : (
              <code className="px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-sm" {...props}>
                {children}
              </code>
            );
          },
          // 自定义链接样式
          a({ href, children }) {
            return (
              <a
                href={href}
                target="_blank"
                rel="noopener noreferrer"
                className="text-blue-600 hover:underline"
              >
                {children}
              </a>
            );
          },
        }}
      >
        {content}
      </ReactMarkdown>
      
      {/* 流式输入时的光标 */}
      {isStreaming && (
        <motion.span
          animate={{ opacity: [1, 0, 1] }}
          transition={{ duration: 0.8, repeat: Infinity }}
          className="inline-block w-2 h-5 bg-blue-500 ml-0.5 align-middle"
        />
      )}
    </div>
  );
};
四、新闻资讯页面设计
4.1 瀑布流布局
React

// frontend/src/pages/NewsPage.tsx

import { motion, AnimatePresence } from 'framer-motion';
import { useState, useEffect, useRef, useCallback } from 'react';
import { 
  Clock, Eye, Heart, Share2, Bookmark, 
  ChevronRight, Filter, Search, TrendingUp,
  Flame, Sparkles
} from 'lucide-react';
import Masonry from 'react-masonry-css';

export const NewsPage: React.FC = () => {
  const [news, setNews] = useState<NewsItem[]>([]);
  const [activeCategory, setActiveCategory] = useState('all');
  const [isLoading, setIsLoading] = useState(false);
  const [hasMore, setHasMore] = useState(true);

  const categories = [
    { id: 'all', name: '全部', icon: Sparkles },
    { id: 'hot', name: '热门', icon: Flame },
    { id: 'civil', name: '民事', icon: null },
    { id: 'criminal', name: '刑事', icon: null },
    { id: 'labor', name: '劳动', icon: null },
    { id: 'commercial', name: '商事', icon: null },
  ];

  const breakpointColumns = {
    default: 3,
    1100: 2,
    700: 1,
  };

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      {/* 顶部横幅 */}
      <div className="bg-gradient-to-r from-blue-600 to-indigo-700 text-white">
        <div className="container mx-auto px-4 py-12">
          <motion.h1
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            className="text-3xl font-bold mb-4"
          >
            法律资讯
          </motion.h1>
          <motion.p
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.1 }}
            className="text-blue-100 max-w-2xl"
          >
            关注最新法律动态，解读热点案例，为您提供专业的法律资讯服务
          </motion.p>

          {/* 搜索框 */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.2 }}
            className="mt-6 max-w-xl"
          >
            <div className="relative">
              <Search className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
              <input
                type="text"
                placeholder="搜索法律资讯..."
                className="w-full pl-12 pr-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/30"
              />
            </div>
          </motion.div>
        </div>
      </div>

      {/* 分类标签 */}
      <div className="sticky top-0 z-20 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700">
        <div className="container mx-auto px-4">
          <div className="flex items-center gap-2 py-4 overflow-x-auto scrollbar-hide">
            {categories.map((category) => {
              const Icon = category.icon;
              return (
                <motion.button
                  key={category.id}
                  whileHover={{ scale: 1.05 }}
                  whileTap={{ scale: 0.95 }}
                  onClick={() => setActiveCategory(category.id)}
                  className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${
                    activeCategory === category.id
                      ? 'bg-blue-600 text-white shadow-lg shadow-blue-600/25'
                      : 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'
                  }`}
                >
                  {Icon && <Icon className="w-4 h-4" />}
                  {category.name}
                </motion.button>
              );
            })}
          </div>
        </div>
      </div>

      {/* 新闻列表 */}
      <div className="container mx-auto px-4 py-8">
        <Masonry
          breakpointCols={breakpointColumns}
          className="flex -ml-6 w-auto"
          columnClassName="pl-6 bg-clip-padding"
        >
          {news.map((item, index) => (
            <NewsCard key={item.id} item={item} index={index} />
          ))}
        </Masonry>

        {/* 加载更多 */}
        {hasMore && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            className="flex justify-center mt-12"
          >
            <button
              onClick={loadMore}
              disabled={isLoading}
              className="px-8 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2"
            >
              {isLoading ? (
                <>
                  <motion.div
                    animate={{ rotate: 360 }}
                    transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}
                    className="w-5 h-5 border-2 border-gray-300 border-t-blue-600 rounded-full"
                  />
                  加载中...
                </>
              ) : (
                <>
                  加载更多
                  <ChevronRight className="w-4 h-4" />
                </>
              )}
            </button>
          </motion.div>
        )}
      </div>
    </div>
  );
};


// 新闻卡片组件
const NewsCard: React.FC<{ item: NewsItem; index: number }> = ({ item, index }) => {
  const [isHovered, setIsHovered] = useState(false);
  const [isBookmarked, setIsBookmarked] = useState(false);

  return (
    <motion.article
      initial={{ opacity: 0, y: 30 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: index * 0.05, duration: 0.4 }}
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
      className="mb-6 group"
    >
      <div className="bg-white dark:bg-gray-800 rounded-2xl overflow-hidden shadow-card hover:shadow-card-hover transition-all duration-300">
        {/* 图片区域 */}
        {item.coverImage && (
          <div className="relative aspect-video overflow-hidden">
            <motion.img
              src={item.coverImage}
              alt={item.title}
              className="w-full h-full object-cover"
              animate={{ scale: isHovered ? 1.05 : 1 }}
              transition={{ duration: 0.4 }}
            />
            
            {/* 分类标签 */}
            <div className="absolute top-4 left-4">
              <span className="px-3 py-1 bg-blue-600 text-white text-xs font-medium rounded-full">
                {item.category}
              </span>
            </div>

            {/* AI 标签 */}
            {item.aiProcessed && (
              <div className="absolute top-4 right-4">
                <span className="px-3 py-1 bg-purple-600 text-white text-xs font-medium rounded-full flex items-center gap-1">
                  <Sparkles className="w-3 h-3" />
                  AI 精选
                </span>
              </div>
            )}

            {/* 悬停遮罩 */}
            <AnimatePresence>
              {isHovered && (
                <motion.div
                  initial={{ opacity: 0 }}
                  animate={{ opacity: 1 }}
                  exit={{ opacity: 0 }}
                  className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-4"
                >
                  <button className="px-4 py-2 bg-white text-gray-900 rounded-lg font-medium text-sm hover:bg-gray-100 transition-colors">
                    阅读全文
                  </button>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        )}

        {/* 内容区域 */}
        <div className="p-5">
          {/* 标题 */}
          <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
            {item.title}
          </h3>

          {/* 摘要 */}
          <p className="text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3">
            {item.summary}
          </p>

          {/* AI 要点 */}
          {item.aiKeyPoints && item.aiKeyPoints.length > 0 && (
            <div className="mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
              <p className="text-xs text-blue-600 dark:text-blue-400 font-medium mb-2 flex items-center gap-1">
                <Sparkles className="w-3 h-3" />
                AI 提炼要点
              </p>
              <ul className="space-y-1">
                {item.aiKeyPoints.slice(0, 3).map((point, i) => (
                  <li key={i} className="text-xs text-gray-600 dark:text-gray-400 flex items-start gap-2">
                    <span className="text-blue-500 mt-0.5">•</span>
                    {point}
                  </li>
                ))}
              </ul>
            </div>
          )}

          {/* 风险等级 */}
          {item.riskLevel && (
            <div className="mb-4">
              <RiskLevelBadge level={item.riskLevel} />
            </div>
          )}

          {/* 底部信息 */}
          <div className="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
            <div className="flex items-center gap-4">
              <span className="flex items-center gap-1">
                <Clock className="w-4 h-4" />
                {formatDate(item.publishedAt)}
              </span>
              <span className="flex items-center gap-1">
                <Eye className="w-4 h-4" />
                {formatNumber(item.viewCount)}
              </span>
            </div>

            <div className="flex items-center gap-2">
              <motion.button
                whileHover={{ scale: 1.1 }}
                whileTap={{ scale: 0.9 }}
                onClick={() => setIsBookmarked(!isBookmarked)}
                className={`p-2 rounded-lg transition-colors ${
                  isBookmarked
                    ? 'bg-yellow-100 text-yellow-600'
                    : 'hover:bg-gray-100 dark:hover:bg-gray-700'
                }`}
              >
                <Bookmark className={`w-4 h-4 ${isBookmarked ? 'fill-current' : ''}`} />
              </motion.button>
              <motion.button
                whileHover={{ scale: 1.1 }}
                whileTap={{ scale: 0.9 }}
                className="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"
              >
                <Share2 className="w-4 h-4" />
              </motion.button>
            </div>
          </div>
        </div>
      </div>
    </motion.article>
  );
};


// 风险等级徽章
const RiskLevelBadge: React.FC<{ level: string }> = ({ level }) => {
  const config = {
    high: { label: '高风险', color: 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400' },
    medium: { label: '中等风险', color: 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400' },
    low: { label: '低风险', color: 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400' },
  }[level] || { label: level, color: 'bg-gray-100 text-gray-700' };

  return (
    <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${config.color}`}>
      {config.label}
    </span>
  );
};
五、律师/律所展示页面
5.1 律师卡片设计
React

// frontend/src/components/lawyers/LawyerCard.tsx

import { motion } from 'framer-motion';
import { 
  Star, MapPin, Briefcase, Phone, MessageSquare,
  Award, CheckCircle, Clock
} from 'lucide-react';

interface LawyerCardProps {
  lawyer: Lawyer;
  variant?: 'default' | 'compact' | 'featured';
}

export const LawyerCard: React.FC<LawyerCardProps> = ({ 
  lawyer, 
  variant = 'default' 
}) => {
  if (variant === 'featured') {
    return <FeaturedLawyerCard lawyer={lawyer} />;
  }

  return (
    <motion.div
      whileHover={{ y: -4 }}
      className="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-card hover:shadow-card-hover transition-all duration-300 border border-gray-100 dark:border-gray-700"
    >
      <div className="flex gap-4">
        {/* 头像 */}
        <div className="relative flex-shrink-0">
          <img
            src={lawyer.avatar}
            alt={lawyer.name}
            className="w-20 h-20 rounded-xl object-cover"
          />
          {lawyer.isOnline && (
            <span className="absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full" />
          )}
        </div>

        {/* 信息 */}
        <div className="flex-1 min-w-0">
          <div className="flex items-start justify-between">
            <div>
              <h3 className="text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2">
                {lawyer.name}
                {lawyer.isVerified && (
                  <CheckCircle className="w-4 h-4 text-blue-500" />
                )}
              </h3>
              <p className="text-sm text-gray-500 dark:text-gray-400">
                {lawyer.title} · {lawyer.firm}
              </p>
            </div>
            
            {/* 评分 */}
            <div className="flex items-center gap-1 bg-yellow-50 dark:bg-yellow-900/20 px-2 py-1 rounded-lg">
              <Star className="w-4 h-4 text-yellow-500 fill-yellow-500" />
              <span className="text-sm font-medium text-yellow-700 dark:text-yellow-400">
                {lawyer.rating}
              </span>
            </div>
          </div>

          {/* 标签 */}
          <div className="flex flex-wrap gap-2 mt-3">
            {lawyer.specialties.slice(0, 3).map((specialty, i) => (
              <span
                key={i}
                className="px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-xs rounded-md"
              >
                {specialty}
              </span>
            ))}
          </div>

          {/* 统计 */}
          <div className="flex items-center gap-4 mt-3 text-sm text-gray-500 dark:text-gray-400">
            <span className="flex items-center gap-1">
              <Briefcase className="w-4 h-4" />
              {lawyer.experience}年经验
            </span>
            <span className="flex items-center gap-1">
              <Award className="w-4 h-4" />
              {lawyer.caseCount}+ 案件
            </span>
            <span className="flex items-center gap-1">
              <MapPin className="w-4 h-4" />
              {lawyer.location}
            </span>
          </div>
        </div>
      </div>

      {/* 操作按钮 */}
      <div className="flex gap-3 mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
        <motion.button
          whileHover={{ scale: 1.02 }}
          whileTap={{ scale: 0.98 }}
          className="flex-1 py-2.5 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2"
        >
          <MessageSquare className="w-4 h-4" />
          在线咨询
        </motion.button>
        <motion.button
          whileHover={{ scale: 1.02 }}
          whileTap={{ scale: 0.98 }}
          className="flex-1 py-2.5 border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center justify-center gap-2"
        >
          <Phone className="w-4 h-4" />
          电话咨询
        </motion.button>
      </div>
    </motion.div>
  );
};


// 精选律师卡片
const FeaturedLawyerCard: React.FC<{ lawyer: Lawyer }> = ({ lawyer }) => {
  return (
    <motion.div
      initial={{ opacity: 0, scale: 0.95 }}
      animate={{ opacity: 1, scale: 1 }}
      whileHover={{ y: -8 }}
      className="relative bg-gradient-to-br from-blue-600 to-indigo-700 rounded-3xl p-8 text-white overflow-hidden"
    >
      {/* 背景装饰 */}
      <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32" />
      <div className="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24" />

      {/* 精选标签 */}
      <div className="absolute top-4 right-4">
        <span className="px-3 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full flex items-center gap-1">
          <Award className="w-3 h-3" />
          精选律师
        </span>
      </div>

      <div className="relative flex flex-col md:flex-row gap-6">
        {/* 头像 */}
        <div className="flex-shrink-0">
          <img
            src={lawyer.avatar}
            alt={lawyer.name}
            className="w-32 h-32 rounded-2xl object-cover border-4 border-white/20"
          />
        </div>

        {/* 信息 */}
        <div className="flex-1">
          <h3 className="text-2xl font-bold mb-1">{lawyer.name}</h3>
          <p className="text-blue-200 mb-4">{lawyer.title} · {lawyer.firm}</p>

          {/* 评分和统计 */}
          <div className="flex items-center gap-6 mb-4">
            <div className="flex items-center gap-1">
              <Star className="w-5 h-5 text-yellow-400 fill-yellow-400" />
              <span className="font-bold">{lawyer.rating}</span>
              <span className="text-blue-200">({lawyer.reviewCount}评价)</span>
            </div>
            <div className="flex items-center gap-1">
              <Briefcase className="w-5 h-5" />
              <span>{lawyer.experience}年经验</span>
            </div>
          </div>

          {/* 专长 */}
          <div className="flex flex-wrap gap-2 mb-6">
            {lawyer.specialties.map((specialty, i) => (
              <span
                key={i}
                className="px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-sm"
              >
                {specialty}
              </span>
            ))}
          </div>

          {/* 操作按钮 */}
          <div className="flex gap-3">
            <motion.button
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.98 }}
              className="px-6 py-3 bg-white text-blue-600 rounded-xl font-semibold hover:bg-blue-50 transition-colors flex items-center gap-2"
            >
              <MessageSquare className="w-5 h-5" />
              立即咨询
            </motion.button>
            <motion.button
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.98 }}
              className="px-6 py-3 border-2 border-white/30 rounded-xl font-semibold hover:bg-white/10 transition-colors flex items-center gap-2"
            >
              查看详情
            </motion.button>
          </div>
        </div>
      </div>
    </motion.div>
  );
};
六、动效组件库
6.1 加载动画集合
React

// frontend/src/components/ui/Loaders.tsx

import { motion } from 'framer-motion';

// 法律天平加载动画
export const ScaleLoader: React.FC<{ size?: number }> = ({ size = 60 }) => {
  return (
    <div className="flex flex-col items-center gap-4">
      <svg width={size} height={size} viewBox="0 0 60 60">
        {/* 支柱 */}
        <motion.line
          x1="30" y1="10" x2="30" y2="50"
          stroke="currentColor"
          strokeWidth="3"
          strokeLinecap="round"
          initial={{ pathLength: 0 }}
          animate={{ pathLength: 1 }}
          transition={{ duration: 0.5 }}
        />
        
        {/* 横梁 */}
        <motion.line
          x1="10" y1="15" x2="50" y2="15"
          stroke="currentColor"
          strokeWidth="3"
          strokeLinecap="round"
          initial={{ pathLength: 0 }}
          animate={{ pathLength: 1 }}
          transition={{ duration: 0.5, delay: 0.2 }}
        />
        
        {/* 左秤盘 */}
        <motion.g
          animate={{ rotate: [-5, 5, -5] }}
          transition={{ duration: 2, repeat: Infinity, ease: 'easeInOut' }}
          style={{ originX: '10px', originY: '15px' }}
        >
          <line x1="10" y1="15" x2="10" y2="30" stroke="currentColor" strokeWidth="2" />
          <circle cx="10" cy="35" r="8" fill="none" stroke="currentColor" strokeWidth="2" />
        </motion.g>
        
        {/* 右秤盘 */}
        <motion.g
          animate={{ rotate: [5, -5, 5] }}
          transition={{ duration: 2, repeat: Infinity, ease: 'easeInOut' }}
          style={{ originX: '50px', originY: '15px' }}
        >
          <line x1="50" y1="15" x2="50" y2="30" stroke="currentColor" strokeWidth="2" />
          <circle cx="50" cy="35" r="8" fill="none" stroke="currentColor" strokeWidth="2" />
        </motion.g>
      </svg>
      <p className="text-sm text-gray-500 animate-pulse">加载中...</p>
    </div>
  );
};


// 脉冲点加载
export const PulseLoader: React.FC = () => {
  return (
    <div className="flex items-center gap-2">
      {[0, 1, 2].map((i) => (
        <motion.div
          key={i}
          className="w-3 h-3 bg-blue-600 rounded-full"
          animate={{
            scale: [1, 1.5, 1],
            opacity: [0.5, 1, 0.5],
          }}
          transition={{
            duration: 1,
            repeat: Infinity,
            delay: i * 0.2,
          }}
        />
      ))}
    </div>
  );
};


// 骨架屏
export const Skeleton: React.FC<{
  className?: string;
  variant?: 'text' | 'circular' | 'rectangular';
}> = ({ className, variant = 'rectangular' }) => {
  const baseClass = 'animate-shimmer bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 bg-[length:200%_100%]';
  
  const variantClass = {
    text: 'h-4 rounded',
    circular: 'rounded-full',
    rectangular: 'rounded-lg',
  }[variant];

  return <div className={`${baseClass} ${variantClass} ${className}`} />;
};


// 卡片骨架屏
export const CardSkeleton: React.FC = () => {
  return (
    <div className="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-card">
      <div className="flex gap-4">
        <Skeleton variant="circular" className="w-16 h-16" />
        <div className="flex-1 space-y-3">
          <Skeleton className="w-3/4 h-5" />
          <Skeleton className="w-1/2 h-4" />
        </div>
      </div>
      <div className="mt-4 space-y-2">
        <Skeleton className="w-full h-4" />
        <Skeleton className="w-5/6 h-4" />
      </div>
      <div className="flex gap-3 mt-4">
        <Skeleton className="flex-1 h-10" />
        <Skeleton className="flex-1 h-10" />
      </div>
    </div>
  );
};
6.2 页面过渡动画
React

// frontend/src/components/layout/PageTransition.tsx

import { motion, AnimatePresence } from 'framer-motion';
import { useLocation } from 'react-router-dom';

const pageVariants = {
  initial: {
    opacity: 0,
    y: 20,
    scale: 0.98,
  },
  enter: {
    opacity: 1,
    y: 0,
    scale: 1,
    transition: {
      duration: 0.4,
      ease: [0.61, 1, 0.88, 1],
    },
  },
  exit: {
    opacity: 0,
    y: -20,
    scale: 0.98,
    transition: {
      duration: 0.3,
      ease: [0.61, 1, 0.88, 1],
    },
  },
};

export const PageTransition: React.FC<{ children: React.ReactNode }> = ({ 
  children 
}) => {
  const location = useLocation();

  return (
    <AnimatePresence mode="wait">
      <motion.div
        key={location.pathname}
        variants={pageVariants}
        initial="initial"
        animate="enter"
        exit="exit"
      >
        {children}
      </motion.div>
    </AnimatePresence>
  );
};


// 滑动页面过渡
export const SlideTransition: React.FC<{ 
  children: React.ReactNode;
  direction?: 'left' | 'right' | 'up' | 'down';
}> = ({ children, direction = 'left' }) => {
  const location = useLocation();
  
  const directionMap = {
    left: { x: 100, y: 0 },
    right: { x: -100, y: 0 },
    up: { x: 0, y: 100 },
    down: { x: 0, y: -100 },
  };

  const offset = directionMap[direction];

  return (
    <AnimatePresence mode="wait">
      <motion.div
        key={location.pathname}
        initial={{ opacity: 0, ...offset }}
        animate={{ opacity: 1, x: 0, y: 0 }}
        exit={{ opacity: 0, x: -offset.x, y: -offset.y }}
        transition={{ duration: 0.3, ease: 'easeInOut' }}
      >
        {children}
      </motion.div>
    </AnimatePresence>
  );
};
6.3 滚动触发动画
React

// frontend/src/hooks/useScrollAnimation.ts

import { useInView, useAnimation, Variants } from 'framer-motion';
import { useEffect, useRef } from 'react';

export const useScrollAnimation = (
  variants: Variants = defaultVariants,
  threshold: number = 0.1
) => {
  const ref = useRef<HTMLDivElement>(null);
  const isInView = useInView(ref, { once: true, amount: threshold });
  const controls = useAnimation();

  useEffect(() => {
    if (isInView) {
      controls.start('visible');
    }
  }, [isInView, controls]);

  return { ref, controls, variants };
};

const defaultVariants: Variants = {
  hidden: { opacity: 0, y: 50 },
  visible: {
    opacity: 1,
    y: 0,
    transition: { duration: 0.6, ease: 'easeOut' },
  },
};

// 预设动画变体
export const fadeInUp: Variants = {
  hidden: { opacity: 0, y: 30 },
  visible: { opacity: 1, y: 0 },
};

export const fadeInLeft: Variants = {
  hidden: { opacity: 0, x: -50 },
  visible: { opacity: 1, x: 0 },
};

export const fadeInRight: Variants = {
  hidden: { opacity: 0, x: 50 },
  visible: { opacity: 1, x: 0 },
};

export const scaleIn: Variants = {
  hidden: { opacity: 0, scale: 0.8 },
  visible: { opacity: 1, scale: 1 },
};

export const staggerContainer: Variants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.1,
    },
  },
};


// 使用示例
export const AnimatedSection: React.FC<{ children: React.ReactNode }> = ({ 
  children 
}) => {
  const { ref, controls, variants } = useScrollAnimation(fadeInUp);

  return (
    <motion.div
      ref={ref}
      initial="hidden"
      animate={controls}
      variants={variants}
    >
      {children}
    </motion.div>
  );
};
七、暗黑模式设计
7.1 主题系统
React

// frontend/src/contexts/ThemeContext.tsx

import { createContext, useContext, useEffect, useState } from 'react';

type Theme = 'light' | 'dark' | 'system';

interface ThemeContextType {
  theme: Theme;
  resolvedTheme: 'light' | 'dark';
  setTheme: (theme: Theme) => void;
  toggleTheme: () => void;
}

const ThemeContext = createContext<ThemeContextType | null>(null);

export const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ 
  children 
}) => {
  const [theme, setThemeState] = useState<Theme>(() => {
    if (typeof window !== 'undefined') {
      return (localStorage.getItem('theme') as Theme) || 'system';
    }
    return 'system';
  });

  const [resolvedTheme, setResolvedTheme] = useState<'light' | 'dark'>('light');

  useEffect(() => {
    const root = window.document.documentElement;
    
    const getResolvedTheme = (): 'light' | 'dark' => {
      if (theme === 'system') {
        return window.matchMedia('(prefers-color-scheme: dark)').matches
          ? 'dark'
          : 'light';
      }
      return theme;
    };

    const resolved = getResolvedTheme();
    setResolvedTheme(resolved);

    root.classList.remove('light', 'dark');
    root.classList.add(resolved);

    // 监听系统主题变化
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    const handleChange = () => {
      if (theme === 'system') {
        const newResolved = mediaQuery.matches ? 'dark' : 'light';
        setResolvedTheme(newResolved);
        root.classList.remove('light', 'dark');
        root.classList.add(newResolved);
      }
    };

    mediaQuery.addEventListener('change', handleChange);
    return () => mediaQuery.removeEventListener('change', handleChange);
  }, [theme]);

  const setTheme = (newTheme: Theme) => {
    setThemeState(newTheme);
    localStorage.setItem('theme', newTheme);
  };

  const toggleTheme = () => {
    setTheme(resolvedTheme === 'light' ? 'dark' : 'light');
  };

  return (
    <ThemeContext.Provider value={{ theme, resolvedTheme, setTheme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within ThemeProvider');
  }
  return context;
};


// 主题切换按钮
import { motion } from 'framer-motion';
import { Sun, Moon, Monitor } from 'lucide-react';

export const ThemeToggle: React.FC = () => {
  const { theme, resolvedTheme, setTheme } = useTheme();

  const themes: { value: Theme; icon: React.ReactNode; label: string }[] = [
    { value: 'light', icon: <Sun className="w-4 h-4" />, label: '浅色' },
    { value: 'dark', icon: <Moon className="w-4 h-4" />, label: '深色' },
    { value: 'system', icon: <Monitor className="w-4 h-4" />, label: '系统' },
  ];

  return (
    <div className="flex items-center p-1 bg-gray-100 dark:bg-gray-800 rounded-xl">
      {themes.map(({ value, icon, label }) => (
        <motion.button
          key={value}
          onClick={() => setTheme(value)}
          className={`relative flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${
            theme === value
              ? 'text-blue-600 dark:text-blue-400'
              : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'
          }`}
        >
          {theme === value && (
            <motion.div
              layoutId="theme-indicator"
              className="absolute inset-0 bg-white dark:bg-gray-700 rounded-lg shadow-sm"
              transition={{ type: 'spring', duration: 0.3 }}
            />
          )}
          <span className="relative z-10">{icon}</span>
          <span className="relative z-10 hidden sm:inline">{label}</span>
        </motion.button>
      ))}
    </div>
  );
};
八、移动端适配
8.1 响应式导航
React

// frontend/src/components/layout/MobileNav.tsx

import { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { 
  Menu, X, Home, MessageSquare, Newspaper, 
  Users, User, Scale, ChevronRight 
} from 'lucide-react';
import { Link, useLocation } from 'react-router-dom';

const navItems = [
  { path: '/', label: '首页', icon: Home },
  { path: '/chat', label: 'AI 咨询', icon: MessageSquare },
  { path: '/news', label: '法律资讯', icon: Newspaper },
  { path: '/lawyers', label: '找律师', icon: Users },
  { path: '/profile', label: '我的', icon: User },
];

export const MobileNav: React.FC = () => {
  const [isOpen, setIsOpen] = useState(false);
  const location = useLocation();

  // 路由变化时关闭菜单
  useEffect(() => {
    setIsOpen(false);
  }, [location]);

  // 防止背景滚动
  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = '';
    }
    return () => {
      document.body.style.overflow = '';
    };
  }, [isOpen]);

  return (
    <>
      {/* 汉堡菜单按钮 */}
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="lg:hidden p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg"
      >
        <Menu className="w-6 h-6" />
      </button>

      {/* 遮罩层 */}
      <AnimatePresence>
        {isOpen 

// frontend/src/components/layout/MobileNav.tsx（续）

import { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { 
  Menu, X, Home, MessageSquare, Newspaper, 
  Users, User, Scale, ChevronRight, Settings,
  HelpCircle, LogOut, Moon, Sun
} from 'lucide-react';
import { Link, useLocation } from 'react-router-dom';
import { useTheme } from '@/contexts/ThemeContext';

const navItems = [
  { path: '/', label: '首页', icon: Home },
  { path: '/chat', label: 'AI 咨询', icon: MessageSquare, badge: 'HOT' },
  { path: '/news', label: '法律资讯', icon: Newspaper },
  { path: '/lawyers', label: '找律师', icon: Users },
  { path: '/forum', label: '法律论坛', icon: Scale },
];

const secondaryItems = [
  { path: '/settings', label: '设置', icon: Settings },
  { path: '/help', label: '帮助中心', icon: HelpCircle },
];

export const MobileNav: React.FC = () => {
  const [isOpen, setIsOpen] = useState(false);
  const location = useLocation();
  const { resolvedTheme, toggleTheme } = useTheme();

  // 路由变化时关闭菜单
  useEffect(() => {
    setIsOpen(false);
  }, [location]);

  // 防止背景滚动
  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = '';
    }
    return () => {
      document.body.style.overflow = '';
    };
  }, [isOpen]);

  const menuVariants = {
    closed: {
      x: '100%',
      transition: { type: 'spring', stiffness: 400, damping: 40 }
    },
    open: {
      x: 0,
      transition: { type: 'spring', stiffness: 400, damping: 40 }
    }
  };

  const itemVariants = {
    closed: { x: 50, opacity: 0 },
    open: (i: number) => ({
      x: 0,
      opacity: 1,
      transition: { delay: i * 0.05 }
    })
  };

  return (
    <>
      {/* 汉堡菜单按钮 */}
      <motion.button
        whileTap={{ scale: 0.95 }}
        onClick={() => setIsOpen(!isOpen)}
        className="lg:hidden p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl"
      >
        <Menu className="w-6 h-6" />
      </motion.button>

      {/* 遮罩层 + 侧边菜单 */}
      <AnimatePresence>
        {isOpen && (
          <>
            {/* 遮罩 */}
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              onClick={() => setIsOpen(false)}
              className="fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden"
            />

            {/* 侧边菜单 */}
            <motion.nav
              variants={menuVariants}
              initial="closed"
              animate="open"
              exit="closed"
              className="fixed top-0 right-0 bottom-0 w-80 max-w-[85vw] bg-white dark:bg-gray-900 shadow-2xl z-50 lg:hidden flex flex-col"
            >
              {/* 头部 */}
              <div className="flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-800">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center">
                    <Scale className="w-5 h-5 text-white" />
                  </div>
                  <div>
                    <h2 className="font-bold text-gray-900 dark:text-white">百姓法律助手</h2>
                    <p className="text-xs text-gray-500">智能法律服务平台</p>
                  </div>
                </div>
                <motion.button
                  whileTap={{ scale: 0.95 }}
                  onClick={() => setIsOpen(false)}
                  className="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl"
                >
                  <X className="w-5 h-5 text-gray-500" />
                </motion.button>
              </div>

              {/* 用户信息（如果已登录） */}
              <div className="p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 mx-4 mt-4 rounded-2xl">
                <div className="flex items-center gap-3">
                  <div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold">
                    U
                  </div>
                  <div>
                    <p className="font-medium text-gray-900 dark:text-white">未登录</p>
                    <Link 
                      to="/login" 
                      className="text-sm text-blue-600 dark:text-blue-400 hover:underline"
                    >
                      点击登录/注册
                    </Link>
                  </div>
                </div>
              </div>

              {/* 主导航 */}
              <div className="flex-1 overflow-y-auto py-4">
                <div className="px-4 mb-2">
                  <p className="text-xs font-medium text-gray-400 uppercase tracking-wider">
                    主要功能
                  </p>
                </div>
                <ul className="space-y-1 px-2">
                  {navItems.map((item, index) => {
                    const Icon = item.icon;
                    const isActive = location.pathname === item.path;
                    
                    return (
                      <motion.li
                        key={item.path}
                        custom={index}
                        variants={itemVariants}
                      >
                        <Link
                          to={item.path}
                          className={`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${
                            isActive
                              ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400'
                              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800'
                          }`}
                        >
                          <Icon className="w-5 h-5" />
                          <span className="font-medium">{item.label}</span>
                          {item.badge && (
                            <span className="ml-auto px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full">
                              {item.badge}
                            </span>
                          )}
                          <ChevronRight className={`w-4 h-4 ml-auto text-gray-400 ${item.badge ? 'hidden' : ''}`} />
                        </Link>
                      </motion.li>
                    );
                  })}
                </ul>

                {/* 分隔线 */}
                <div className="my-4 mx-4 border-t border-gray-100 dark:border-gray-800" />

                {/* 次要导航 */}
                <div className="px-4 mb-2">
                  <p className="text-xs font-medium text-gray-400 uppercase tracking-wider">
                    其他
                  </p>
                </div>
                <ul className="space-y-1 px-2">
                  {secondaryItems.map((item, index) => {
                    const Icon = item.icon;
                    return (
                      <motion.li
                        key={item.path}
                        custom={navItems.length + index}
                        variants={itemVariants}
                      >
                        <Link
                          to={item.path}
                          className="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"
                        >
                          <Icon className="w-5 h-5" />
                          <span className="font-medium">{item.label}</span>
                          <ChevronRight className="w-4 h-4 ml-auto text-gray-400" />
                        </Link>
                      </motion.li>
                    );
                  })}
                </ul>
              </div>

              {/* 底部操作 */}
              <div className="p-4 border-t border-gray-100 dark:border-gray-800 space-y-3">
                {/* 主题切换 */}
                <button
                  onClick={toggleTheme}
                  className="w-full flex items-center justify-between px-4 py-3 bg-gray-50 dark:bg-gray-800 rounded-xl"
                >
                  <span className="flex items-center gap-3 text-gray-700 dark:text-gray-300">
                    {resolvedTheme === 'dark' ? (
                      <Moon className="w-5 h-5" />
                    ) : (
                      <Sun className="w-5 h-5" />
                    )}
                    <span>外观模式</span>
                  </span>
                  <span className="text-sm text-gray-500">
                    {resolvedTheme === 'dark' ? '深色' : '浅色'}
                  </span>
                </button>

                {/* 退出登录 */}
                <button className="w-full flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors">
                  <LogOut className="w-5 h-5" />
                  <span>退出登录</span>
                </button>
              </div>
            </motion.nav>
          </>
        )}
      </AnimatePresence>
    </>
  );
};
8.2 移动端底部导航栏
React

// frontend/src/components/layout/BottomTabBar.tsx

import { motion } from 'framer-motion';
import { Link, useLocation } from 'react-router-dom';
import { Home, MessageSquare, Newspaper, Users, User } from 'lucide-react';

const tabs = [
  { path: '/', label: '首页', icon: Home },
  { path: '/news', label: '资讯', icon: Newspaper },
  { path: '/chat', label: 'AI咨询', icon: MessageSquare, primary: true },
  { path: '/lawyers', label: '律师', icon: Users },
  { path: '/profile', label: '我的', icon: User },
];

export const BottomTabBar: React.FC = () => {
  const location = useLocation();

  return (
    <nav className="fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border-t border-gray-200 dark:border-gray-800 safe-area-pb lg:hidden z-30">
      <div className="flex items-center justify-around h-16">
        {tabs.map((tab) => {
          const Icon = tab.icon;
          const isActive = location.pathname === tab.path;

          if (tab.primary) {
            // 中间突出的主按钮
            return (
              <Link key={tab.path} to={tab.path} className="relative -mt-6">
                <motion.div
                  whileHover={{ scale: 1.05 }}
                  whileTap={{ scale: 0.95 }}
                  className={`w-14 h-14 rounded-full flex items-center justify-center shadow-lg ${
                    isActive
                      ? 'bg-gradient-to-br from-blue-500 to-blue-600'
                      : 'bg-gradient-to-br from-blue-600 to-indigo-600'
                  }`}
                >
                  <Icon className="w-6 h-6 text-white" />
                </motion.div>
                {/* 光晕效果 */}
                <div className="absolute inset-0 rounded-full bg-blue-500 blur-xl opacity-30 -z-10" />
              </Link>
            );
          }

          return (
            <Link
              key={tab.path}
              to={tab.path}
              className="relative flex flex-col items-center justify-center flex-1 h-full"
            >
              <motion.div
                whileTap={{ scale: 0.9 }}
                className="flex flex-col items-center"
              >
                <div className="relative">
                  <Icon
                    className={`w-6 h-6 transition-colors ${
                      isActive
                        ? 'text-blue-600 dark:text-blue-400'
                        : 'text-gray-400 dark:text-gray-500'
                    }`}
                  />
                  {/* 活跃指示器 */}
                  {isActive && (
                    <motion.div
                      layoutId="tab-indicator"
                      className="absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-600 rounded-full"
                    />
                  )}
                </div>
                <span
                  className={`text-xs mt-1 transition-colors ${
                    isActive
                      ? 'text-blue-600 dark:text-blue-400 font-medium'
                      : 'text-gray-400 dark:text-gray-500'
                  }`}
                >
                  {tab.label}
                </span>
              </motion.div>
            </Link>
          );
        })}
      </div>
    </nav>
  );
};


// 使用 safe-area 处理 iPhone 底部
// 在 tailwind.config.js 中添加：
// plugins: [
//   function({ addUtilities }) {
//     addUtilities({
//       '.safe-area-pb': {
//         'padding-bottom': 'env(safe-area-inset-bottom)',
//       },
//     })
//   }
// ]
8.3 下拉刷新与无限滚动
React

// frontend/src/components/common/PullToRefresh.tsx

import { motion, useMotionValue, useTransform, useAnimation } from 'framer-motion';
import { useState, useRef, useEffect } from 'react';
import { RefreshCw } from 'lucide-react';

interface PullToRefreshProps {
  onRefresh: () => Promise<void>;
  children: React.ReactNode;
}

export const PullToRefresh: React.FC<PullToRefreshProps> = ({
  onRefresh,
  children,
}) => {
  const [isRefreshing, setIsRefreshing] = useState(false);
  const containerRef = useRef<HTMLDivElement>(null);
  const y = useMotionValue(0);
  const controls = useAnimation();
  
  const pullProgress = useTransform(y, [0, 100], [0, 1]);
  const rotate = useTransform(y, [0, 100], [0, 180]);
  const opacity = useTransform(y, [0, 50, 100], [0, 0.5, 1]);

  const handleTouchStart = useRef({ y: 0 });
  const canPull = useRef(false);

  useEffect(() => {
    const container = containerRef.current;
    if (!container) return;

    const handleTouchStartEvent = (e: TouchEvent) => {
      if (container.scrollTop === 0) {
        handleTouchStart.current.y = e.touches[0].clientY;
        canPull.current = true;
      }
    };

    const handleTouchMove = (e: TouchEvent) => {
      if (!canPull.current || isRefreshing) return;
      
      const currentY = e.touches[0].clientY;
      const diff = currentY - handleTouchStart.current.y;
      
      if (diff > 0 && container.scrollTop === 0) {
        e.preventDefault();
        y.set(Math.min(diff * 0.5, 120));
      }
    };

    const handleTouchEnd = async () => {
      if (!canPull.current) return;
      canPull.current = false;

      if (y.get() >= 80) {
        setIsRefreshing(true);
        await controls.start({ y: 60 });
        
        try {
          await onRefresh();
        } finally {
          setIsRefreshing(false);
          await controls.start({ y: 0 });
        }
      } else {
        controls.start({ y: 0 });
      }
    };

    container.addEventListener('touchstart', handleTouchStartEvent, { passive: true });
    container.addEventListener('touchmove', handleTouchMove, { passive: false });
    container.addEventListener('touchend', handleTouchEnd, { passive: true });

    return () => {
      container.removeEventListener('touchstart', handleTouchStartEvent);
      container.removeEventListener('touchmove', handleTouchMove);
      container.removeEventListener('touchend', handleTouchEnd);
    };
  }, [isRefreshing, onRefresh, y, controls]);

  return (
    <div ref={containerRef} className="h-full overflow-y-auto overscroll-none">
      {/* 刷新指示器 */}
      <motion.div
        style={{ y, opacity }}
        className="absolute top-0 left-0 right-0 flex items-center justify-center h-16 pointer-events-none"
      >
        <motion.div
          style={{ rotate: isRefreshing ? undefined : rotate }}
          animate={isRefreshing ? { rotate: 360 } : {}}
          transition={isRefreshing ? { duration: 1, repeat: Infinity, ease: 'linear' } : {}}
          className={`p-2 rounded-full ${
            isRefreshing ? 'bg-blue-100 dark:bg-blue-900/30' : 'bg-gray-100 dark:bg-gray-800'
          }`}
        >
          <RefreshCw className={`w-5 h-5 ${
            isRefreshing ? 'text-blue-600' : 'text-gray-500'
          }`} />
        </motion.div>
      </motion.div>

      {/* 内容 */}
      <motion.div style={{ y }} animate={controls}>
        {children}
      </motion.div>
    </div>
  );
};
九、微交互设计
9.1 按钮交互效果
React

// frontend/src/components/ui/InteractiveButton.tsx

import { motion, HTMLMotionProps } from 'framer-motion';
import { useState } from 'react';

interface InteractiveButtonProps extends HTMLMotionProps<'button'> {
  variant?: 'primary' | 'secondary' | 'ghost' | 'danger';
  size?: 'sm' | 'md' | 'lg';
  loading?: boolean;
  success?: boolean;
  ripple?: boolean;
}

export const InteractiveButton: React.FC<InteractiveButtonProps> = ({
  children,
  variant = 'primary',
  size = 'md',
  loading,
  success,
  ripple = true,
  className,
  onClick,
  ...props
}) => {
  const [ripples, setRipples] = useState<{ x: number; y: number; id: number }[]>([]);

  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {
    if (ripple) {
      const rect = e.currentTarget.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const id = Date.now();
      
      setRipples((prev) => [...prev, { x, y, id }]);
      setTimeout(() => {
        setRipples((prev) => prev.filter((r) => r.id !== id));
      }, 600);
    }
    
    onClick?.(e);
  };

  const sizeClasses = {
    sm: 'px-3 py-1.5 text-sm',
    md: 'px-4 py-2',
    lg: 'px-6 py-3 text-lg',
  };

  const variantClasses = {
    primary: 'bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-600/25',
    secondary: 'bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100',
    ghost: 'bg-transparent text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800',
    danger: 'bg-red-600 text-white hover:bg-red-700 shadow-lg shadow-red-600/25',
  };

  return (
    <motion.button
      whileHover={{ scale: 1.02, y: -1 }}
      whileTap={{ scale: 0.98 }}
      className={`
        relative overflow-hidden rounded-xl font-medium transition-colors
        disabled:opacity-50 disabled:cursor-not-allowed
        ${sizeClasses[size]}
        ${variantClasses[variant]}
        ${className}
      `}
      onClick={handleClick}
      disabled={loading || success}
      {...props}
    >
      {/* 波纹效果 */}
      {ripples.map((ripple) => (
        <motion.span
          key={ripple.id}
          initial={{ scale: 0, opacity: 0.5 }}
          animate={{ scale: 4, opacity: 0 }}
          transition={{ duration: 0.6 }}
          className="absolute w-10 h-10 bg-white/30 rounded-full pointer-events-none"
          style={{
            left: ripple.x - 20,
            top: ripple.y - 20,
          }}
        />
      ))}

      {/* 内容 */}
      <span className="relative z-10 flex items-center justify-center gap-2">
        {loading ? (
          <motion.span
            animate={{ rotate: 360 }}
            transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}
            className="w-5 h-5 border-2 border-current border-t-transparent rounded-full"
          />
        ) : success ? (
          <motion.span
            initial={{ scale: 0 }}
            animate={{ scale: 1 }}
            className="text-green-500"
          >
            ✓
          </motion.span>
        ) : (
          children
        )}
      </span>
    </motion.button>
  );
};
9.2 点赞/收藏动画
React

// frontend/src/components/ui/LikeButton.tsx

import { motion, AnimatePresence } from 'framer-motion';
import { useState } from 'react';
import { Heart } from 'lucide-react';

interface LikeButtonProps {
  liked?: boolean;
  count?: number;
  onToggle?: (liked: boolean) => void;
}

export const LikeButton: React.FC<LikeButtonProps> = ({
  liked: initialLiked = false,
  count: initialCount = 0,
  onToggle,
}) => {
  const [liked, setLiked] = useState(initialLiked);
  const [count, setCount] = useState(initialCount);
  const [particles, setParticles] = useState<number[]>([]);

  const handleClick = () => {
    const newLiked = !liked;
    setLiked(newLiked);
    setCount((c) => c + (newLiked ? 1 : -1));
    
    if (newLiked) {
      // 生成粒子
      setParticles([...Array(8)].map((_, i) => i));
      setTimeout(() => setParticles([]), 700);
    }
    
    onToggle?.(newLiked);
  };

  return (
    <motion.button
      whileTap={{ scale: 0.9 }}
      onClick={handleClick}
      className="relative flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
    >
      {/* 粒子效果 */}
      <AnimatePresence>
        {particles.map((i) => (
          <motion.span
            key={i}
            initial={{ scale: 0, opacity: 1 }}
            animate={{
              scale: 1,
              opacity: 0,
              x: Math.cos((i * Math.PI) / 4) * 30,
              y: Math.sin((i * Math.PI) / 4) * 30,
            }}
            exit={{ opacity: 0 }}
            transition={{ duration: 0.6 }}
            className="absolute w-2 h-2 bg-red-500 rounded-full"
            style={{ left: '50%', top: '50%' }}
          />
        ))}
      </AnimatePresence>

      {/* 爱心图标 */}
      <motion.div
        animate={liked ? { scale: [1, 1.3, 1] } : { scale: 1 }}
        transition={{ duration: 0.3 }}
      >
        <Heart
          className={`w-5 h-5 transition-colors ${
            liked
              ? 'text-red-500 fill-red-500'
              : 'text-gray-400 hover:text-gray-600'
          }`}
        />
      </motion.div>

      {/* 数量 */}
      <AnimatePresence mode="popLayout">
        <motion.span
          key={count}
          initial={{ y: liked ? 10 : -10, opacity: 0 }}
          animate={{ y: 0, opacity: 1 }}
          exit={{ y: liked ? -10 : 10, opacity: 0 }}
          transition={{ duration: 0.2 }}
          className={`text-sm font-medium ${
            liked ? 'text-red-500' : 'text-gray-500'
          }`}
        >
          {count}
        </motion.span>
      </AnimatePresence>
    </motion.button>
  );
};


// 收藏按钮（带星星动画）
export const BookmarkButton: React.FC<{
  bookmarked?: boolean;
  onToggle?: (bookmarked: boolean) => void;
}> = ({ bookmarked: initial = false, onToggle }) => {
  const [bookmarked, setBookmarked] = useState(initial);
  const [showStar, setShowStar] = useState(false);

  const handleClick = () => {
    const newBookmarked = !bookmarked;
    setBookmarked(newBookmarked);
    
    if (newBookmarked) {
      setShowStar(true);
      setTimeout(() => setShowStar(false), 800);
    }
    
    onToggle?.(newBookmarked);
  };

  return (
    <motion.button
      whileTap={{ scale: 0.9 }}
      onClick={handleClick}
      className="relative p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
    >
      {/* 星星上升动画 */}
      <AnimatePresence>
        {showStar && (
          <motion.span
            initial={{ y: 0, opacity: 1, scale: 1 }}
            animate={{ y: -30, opacity: 0, scale: 1.5 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 0.8 }}
            className="absolute inset-0 flex items-center justify-center text-yellow-400"
          >
            ⭐
          </motion.span>
        )}
      </AnimatePresence>

      <motion.svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        className="w-5 h-5"
        animate={bookmarked ? { scale: [1, 1.2, 1] } : {}}
      >
        <motion.path
          d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
          fill={bookmarked ? '#EAB308' : 'none'}
          stroke={bookmarked ? '#EAB308' : '#9CA3AF'}
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          initial={false}
          animate={{ fill: bookmarked ? '#EAB308' : 'rgba(0,0,0,0)' }}
        />
      </motion.svg>
    </motion.button>
  );
};
9.3 输入框交互
React

// frontend/src/components/ui/FloatingLabelInput.tsx

import { motion, AnimatePresence } from 'framer-motion';
import { useState, forwardRef } from 'react';
import { Check, AlertCircle, Eye, EyeOff } from 'lucide-react';

interface FloatingLabelInputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label: string;
  error?: string;
  success?: boolean;
  icon?: React.ReactNode;
}

export const FloatingLabelInput = forwardRef<HTMLInputElement, FloatingLabelInputProps>(
  ({ label, error, success, icon, type: initialType = 'text', className, ...props }, ref) => {
    const [isFocused, setIsFocused] = useState(false);
    const [hasValue, setHasValue] = useState(false);
    const [showPassword, setShowPassword] = useState(false);
    
    const isPassword = initialType === 'password';
    const type = isPassword ? (showPassword ? 'text' : 'password') : initialType;
    const isFloating = isFocused || hasValue;

    return (
      <div className={`relative ${className}`}>
        {/* 输入框容器 */}
        <div
          className={`
            relative border-2 rounded-xl transition-all duration-200
            ${isFocused
              ? error
                ? 'border-red-500 ring-4 ring-red-500/10'
                : 'border-blue-500 ring-4 ring-blue-500/10'
              : error
                ? 'border-red-300'
                : 'border-gray-200 dark:border-gray-700'
            }
          `}
        >
          {/* 左侧图标 */}
          {icon && (
            <div className="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">
              {icon}
            </div>
          )}

          {/* 输入框 */}
          <input
            ref={ref}
            type={type}
            className={`
              w-full px-4 py-4 bg-transparent rounded-xl outline-none
              text-gray-900 dark:text-white
              ${icon ? 'pl-12' : ''}
              ${isPassword || success || error ? 'pr-12' : ''}
            `}
            onFocus={() => setIsFocused(true)}
            onBlur={(e) => {
              setIsFocused(false);
              setHasValue(e.target.value !== '');
            }}
            onChange={(e) => setHasValue(e.target.value !== '')}
            {...props}
          />

          {/* 浮动标签 */}
          <motion.label
            initial={false}
            animate={{
              y: isFloating ? -28 : 0,
              x: isFloating ? (icon ? -32 : 0) : 0,
              scale: isFloating ? 0.85 : 1,
            }}
            className={`
              absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none
              transition-colors duration-200 origin-left
              ${icon ? 'left-12' : ''}
              ${isFocused
                ? error
                  ? 'text-red-500'
                  : 'text-blue-500'
                : 'text-gray-400'
              }
              ${isFloating ? 'bg-white dark:bg-gray-900 px-1' : ''}
            `}
          >
            {label}
          </motion.label>

          {/* 右侧状态图标 */}
          <div className="absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2">
            {isPassword && (
              <button
                type="button"
                onClick={() => setShowPassword(!showPassword)}
                className="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
              >
                {showPassword ? <EyeOff className="w-5 h-5" /> : <Eye className="w-5 h-5" />}
              </button>
            )}
            {success && (
              <motion.div
                initial={{ scale: 0 }}
                animate={{ scale: 1 }}
                className="text-green-500"
              >
                <Check className="w-5 h-5" />
              </motion.div>
            )}
            {error && (
              <motion.div
                initial={{ scale: 0 }}
                animate={{ scale: 1 }}
                className="text-red-500"
              >
                <AlertCircle className="w-5 h-5" />
              </motion.div>
            )}
          </div>
        </div>

        {/* 错误信息 */}
        <AnimatePresence>
          {error && (
            <motion.p
              initial={{ opacity: 0, y: -10 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, y: -10 }}
              className="mt-2 text-sm text-red-500 flex items-center gap-1"
            >
              <AlertCircle className="w-4 h-4" />
              {error}
            </motion.p>
          )}
        </AnimatePresence>
      </div>
    );
  }
);
十、数据可视化组件
10.1 统计卡片
React

// frontend/src/components/dashboard/StatCard.tsx

import { motion, useSpring, useTransform } from 'framer-motion';
import { useEffect, useState } from 'react';
import { TrendingUp, TrendingDown, Minus } from 'lucide-react';

interface StatCardProps {
  title: string;
  value: number;
  suffix?: string;
  prefix?: string;
  change?: number;
  changeLabel?: string;
  icon?: React.ReactNode;
  color?: 'blue' | 'green' | 'purple' | 'orange';
}

export const StatCard: React.FC<StatCardProps> = ({
  title,
  value,
  suffix = '',
  prefix = '',
  change,
  changeLabel,
  icon,
  color = 'blue',
}) => {
  const [isHovered, setIsHovered] = useState(false);
  
  // 数字动画
  const springValue = useSpring(0, { stiffness: 50, damping: 20 });
  const displayValue = useTransform(springValue, (v) => Math.round(v));

  useEffect(() => {
    springValue.set(value);
  }, [value, springValue]);

  const colorClasses = {
    blue: {
      bg: 'bg-blue-50 dark:bg-blue-900/20',
      icon: 'bg-blue-500',
      text: 'text-blue-600 dark:text-blue-400',
    },
    green: {
      bg: 'bg-green-50 dark:bg-green-900/20',
      icon: 'bg-green-500',
      text: 'text-green-600 dark:text-green-400',
    },
    purple: {
      bg: 'bg-purple-50 dark:bg-purple-900/20',
      icon: 'bg-purple-500',
      text: 'text-purple-600 dark:text-purple-400',
    },
    orange: {
      bg: 'bg-orange-50 dark:bg-orange-900/20',
      icon: 'bg-orange-500',
      text: 'text-orange-600 dark:text-orange-400',
    },
  };

  const colors = colorClasses[color];

  return (
    <motion.div
      whileHover={{ y: -4, scale: 1.02 }}
      onHoverStart={() => setIsHovered(true)}
      onHoverEnd={() => setIsHovered(false)}
      className="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-card hover:shadow-card-hover transition-shadow"
    >
      <div className="flex items-start justify-between">
        {/* 左侧内容 */}
        <div>
          <p className="text-sm text-gray-500 dark:text-gray-400 mb-1">
            {title}
          </p>
          <div className="flex items-baseline gap-1">
            <span className="text-3xl font-bold text-gray-900 dark:text-white">
              {prefix}
              <motion.span>{displayValue}</motion.span>
              {suffix}
            </span>
          </div>
          
          {/* 变化率 */}
          {change !== undefined && (
            <div className="flex items-center gap-1 mt-2">
              {change > 0 ? (
                <TrendingUp className="w-4 h-4 text-green-500" />
              ) : change < 0 ? (
                <TrendingDown className="w-4 h-4 text-red-500" />
              ) : (
                <Minus className="w-4 h-4 text-gray-400" />
              )}
              <span
                className={`text-sm font-medium ${
                  change > 0
                    ? 'text-green-500'
                    : change < 0
                    ? 'text-red-500'
                    : 'text-gray-400'
                }`}
              >
                {change > 0 ? '+' : ''}
                {change}%
              </span>
              {changeLabel && (
                <span className="text-sm text-gray-400">
                  {changeLabel}
                </span>
              )}
            </div>
          )}
        </div>

        {/* 右侧图标 */}
        {icon && (
          <motion.div
            animate={{ rotate: isHovered ? 10 : 0 }}
            className={`p-3 rounded-xl ${colors.icon} text-white`}
          >
            {icon}
          </motion.div>
        )}
      </div>

      {/* 底部进度条 */}
      <div className="mt-4 h-1 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden">
        <motion.div
          initial={{ width: 0 }}
          animate={{ width: `${Math.min((value / 100) * 100, 100)}%` }}
          transition={{ duration: 1, ease: 'easeOut' }}
          className={`h-full ${colors.icon} rounded-full`}
        />
      </div>
    </motion.div>
  );
};
10.2 环形进度图
React

// frontend/src/components/charts/CircularProgress.tsx

import { motion, useSpring, useTransform } from 'framer-motion';
import { useEffect } from 'react';

interface CircularProgressProps {
  value: number;
  max?: number;
  size?: number;
  strokeWidth?: number;
  color?: string;
  backgroundColor?: string;
  label?: string;
  showValue?: boolean;
}

export const CircularProgress: React.FC<CircularProgressProps> = ({
  value,
  max = 100,
  size = 120,
  strokeWidth = 8,
  color = '#3B82F6',
  backgroundColor = '#E5E7EB',
  label,
  showValue = true,
}) => {
  const radius = (size - strokeWidth) / 2;
  const circumference = 2 * Math.PI * radius;
  const percentage = Math.min((value / max) * 100, 100);
  
  // 动画值
  const springValue = useSpring(0, { stiffness: 50, damping: 20 });
  const strokeDashoffset = useTransform(
    springValue,
    [0, 100],
    [circumference, 0]
  );
  const displayValue = useTransform(springValue, (v) => Math.round((v / 100) * max));

  useEffect(() => {
    springValue.set(percentage);
  }, [percentage, springValue]);

  return (
    <div className="relative inline-flex items-center justify-center">
      <svg width={size} height={size} className="-rotate-90">
        {/* 背景圆 */}
        <circle
          cx={size / 2}
          cy={size / 2}
          r={radius}
          fill="none"
          stroke={backgroundColor}
          strokeWidth={strokeWidth}
        />
        
        {/* 进度圆 */}
        <motion.circle
          cx={size / 2}
          cy={size / 2}
          r={radius}
          fill="none"
          stroke={color}
          strokeWidth={strokeWidth}
          strokeLinecap="round"
          strokeDasharray={circumference}
          style={{ strokeDashoffset }}
        />
      </svg>

      {/* 中心内容 */}
      <div className="absolute inset-0 flex flex-col items-center justify-center">
        {showValue && (
          <motion.span className="text-2xl font-bold text-gray-900 dark:text-white">
            {displayValue}
          </motion.span>
        )}
        {label && (
          <span className="text-xs text-gray-500 dark:text-gray-400">
            {label}
          </span>
        )}
      </div>
    </div>
  );
};


// 多环进度图
export const MultiRingProgress: React.FC<{
  rings: Array<{
    value: number;
    max: number;
    color: string;
    label: string;
  }>;
  size?: number;
}> = ({ rings, size = 160 }) => {
  const strokeWidth = 12;
  const gap = 6;

  return (
    <div className="relative" style={{ width: size, height: size }}>
      {rings.map((ring, index) => {
        const ringSize = size - (strokeWidth + gap) * index * 2;
        const offset = (strokeWidth + gap) * index;
        
        return (
          <div
            key={index}
            className="absolute"
            style={{ top: offset, left: offset }}
          >
            <CircularProgress
              value={ring.value}
              max={ring.max}
              size={ringSize}
              strokeWidth={strokeWidth}
              color={ring.color}
              backgroundColor={`${ring.color}20`}
              showValue={false}
            />
          </div>
        );
      })}
      
      {/* 中心标签 */}
      <div className="absolute inset-0 flex items-center justify-center">
        <div className="text-center">
          <p className="text-2xl font-bold text-gray-900 dark:text-white">
            {rings.reduce((acc, r) => acc + r.value, 0)}
          </p>
          <p className="text-xs text-gray-500">总计</p>
        </div>
      </div>
    </div>
  );
};
十一、通知与提示组件
11.1 Toast 通知
React

// frontend/src/components/ui/Toast.tsx

import { motion, AnimatePresence } from 'framer-motion';
import { createContext, useContext, useState, useCallback } from 'react';
import { CheckCircle, XCircle, AlertTriangle, Info, X } from 'lucide-react';

type ToastType = 'success' | 'error' | 'warning' | 'info';

interface Toast {
  id: string;
  type: ToastType;
  title: string;
  message?: string;
  duration?: number;
}

interface ToastContextType {
  toasts: Toast[];
  addToast: (toast: Omit<Toast, 'id'>) => void;
  removeToast: (id: string) => void;
}

const ToastContext = createContext<ToastContextType | null>(null);

export const useToast = () => {
  const context = useContext(ToastContext);
  if (!context) throw new Error('useToast must be used within ToastProvider');
  return context;
};

export const ToastProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [toasts, setToasts] = useState<Toast[]>([]);

  const addToast = useCallback((toast: Omit<Toast, 'id'>) => {
    const id = Math.random().toString(36).substr(2, 9);
    const newToast = { ...toast, id };
    
    setToasts((prev) => [...prev, newToast]);

    // 自动移除
    setTimeout(() => {
      removeToast(id);
    }, toast.duration || 5000);
  }, []);

  const removeToast = useCallback((id: string) => {
    setToasts((prev) => prev.filter((t) => t.id !== id));
  }, []);

  return (
    <ToastContext.Provider value={{ toasts, addToast, removeToast }}>
      {children}
      <ToastContainer />
    </ToastContext.Provider>
  );
};

const ToastContainer: React.FC = () => {
  const { toasts, removeToast } = useToast();

  return (
    <div className="fixed top-4 right-4 z-50 space-y-3 pointer-events-none">
      <AnimatePresence mode="popLayout">
        {toasts.map((toast) => (
          <ToastItem key={toast.id} toast={toast} onClose={() => removeToast(toast.id)} />
        ))}
      </AnimatePresence>
    </div>
  );
};

const ToastItem: React.FC<{ toast: Toast; onClose: () => void }> = ({ toast, onClose }) => {
  const icons = {
    success: <CheckCircle className="w-5 h-5 text-green-500" />,
    error: <XCircle className="w-5 h-5 text-red-500" />,
    warning: <AlertTriangle className="w-5 h-5 text-yellow-500" />,
    info: <Info className="w-5 h-5 text-blue-500" />,
  };

  const colors = {
    success: 'bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800',
    error: 'bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800',
    warning: 'bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800',
    info: 'bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800',
  };

  return (
    <motion.div
      layout
      initial={{ opacity: 0, x: 100, scale: 0.9 }}
      animate={{ opacity: 1, x: 0, scale: 1 }}
      exit={{ opacity: 0, x: 100, scale: 0.9 }}
      className={`
        pointer-events-auto w-80 p-4 rounded-xl border shadow-lg backdrop-blur-sm
        ${colors[toast.type]}
      `}
    >
      <div className="flex gap-3">
        {icons[toast.type]}
        <div className="flex-1">
          <p className="font-medium text-gray-900 dark:text-white">
            {toast.title}
          </p>
          {toast.message && (
            <p className="text-sm text-gray-600 dark:text-gray-400 mt-1">
              {toast.message}
            </p>
          )}
        </div>
        <button
          onClick={onClose}
          className="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
        >
          <X className="w-4 h-4" />
        </button>
      </div>
      
      {/* 进度条 */}
      <motion.div
        initial={{ scaleX: 1 }}
        animate={{ scaleX: 0 }}
        transition={{ duration: (toast.duration || 5000) / 1000, ease: 'linear' }}
        className="absolute bottom-0 left-0 right-0 h-1 bg-current opacity-20 origin-left rounded-b-xl"
      />
    </motion.div>
  );
};
11.2 确认对话框
React

// frontend/src/components/ui/ConfirmDialog.tsx

import { motion, AnimatePresence } from 'framer-motion';
import { AlertTriangle, Trash2, X } from 'lucide-react';

interface ConfirmDialogProps {
  isOpen: boolean;
  onClose: () => void;
  onConfirm: () => void;
  title: string;
  message: string;
  confirmText?: string;
  cancelText?: string;
  variant?: 'danger' | 'warning' | 'info';
  loading?: boolean;
}

export const ConfirmDialog: React.FC<ConfirmDialogProps> = ({
  isOpen,
  onClose,
  onConfirm,
  title,
  message,
  confirmText = '确认',
  cancelText = '取消',
  variant = 'danger',
  loading,
}) => {
  const icons = {
    danger: <Trash2 className="w-6 h-6 text-red-500" />,
    warning: <AlertTriangle className="w-6 h-6 text-yellow-500" />,
    info: <AlertTriangle className="w-6 h-6 text-blue-500" />,
  };

  const buttonColors = {
    danger: 'bg-red-600 hover:bg-red-700 focus:ring-red-500',
    warning: 'bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500',
    info: 'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500',
  };

  return (
    <AnimatePresence>
      {isOpen && (
        <>
          {/* 遮罩 */}
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            onClick={onClose}
            className="fixed inset-0 bg-black/50 backdrop-blur-sm z-50"
          />

          {/* 对话框 */}
          <div className="fixed inset-0 flex items-center justify-center z-50 p-4">
            <motion.div
              initial={{ opacity: 0, scale: 0.9, y: 20 }}
              animate={{ opacity: 1, scale: 1, y: 0 }}
              exit={{ opacity: 0, scale: 0.9, y: 20 }}
              className="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden"
            >
              {/* 头部 */}
              <div className="p-6 pb-4">
                <div className="flex items-center gap-4">
                  <div className={`p-3 rounded-full ${
                    variant === 'danger' ? 'bg-red-100 dark:bg-red-900/30' :
                    variant === 'warning' ? 'bg-yellow-100 dark:bg-yellow-900/30' :
                    'bg-blue-100 dark:bg-blue-900/30'
                  }`}>
                    {icons[variant]}
                  </div>
                  <div>
                    <h3 className="text-lg font-semibold text-gray-900 dark:text-white">
                      {title}
                    </h3>
                    <p className="text-sm text-gray-500 dark:text-gray-400 mt-1">
                      {message}
                    </p>
                  </div>
                </div>
              </div>

              {/* 按钮 */}
              <div className="flex gap-3 p-4 bg-gray-50 dark:bg-gray-900/50">
                <button
                  onClick={onClose}
                  disabled={loading}
                  className="flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-medium hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50"
                >
                  {cancelText}
                </button>
                <motion.button
                  whileHover={{ scale: 1.02 }}
                  whileTap={{ scale: 0.98 }}
                  onClick={onConfirm}
                  disabled={loading}
                  className={`flex-1 px-4 py-2.5 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2 ${buttonColors[variant]}`}
                >
                  {loading ? (
                    <motion.div
                      animate={{ rotate: 360 }}
                      transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}
                      className="w-5 h-5 border-2 border-white border-t-transparent rounded-full"
                    />
                  ) : (
                    confirmText
                  )}
                </motion.button>
              </div>
            </motion.div>
          </div>
        </>
      )}
    </AnimatePresence>
  );
};
十二、错误与空状态页面
12.1 404 页面
React

// frontend/src/pages/NotFoundPage.tsx

import { motion } from 'framer-motion';
import { Link } from 'react-router-dom';
import { Home, ArrowLeft, Search, Scale } from 'lucide-react';

export const NotFoundPage: React.FC = () => {
  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4">
      <div className="text-center max-w-lg">
        {/* 动画插图 */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          className="relative mb-8"
        >
          {/* 404 数字 */}
          <motion.div
            animate={{ 
              y: [0, -10, 0],
            }}
            transition={{ 
              duration: 3,
              repeat: Infinity,
              ease: 'easeInOut'
            }}
            className="text-[150px] font-black text-gray-200 dark:text-gray-800 leading-none"
          >
            404
          </motion.div>

          {/* 天平图标 */}
          <motion.div
            initial={{ scale: 0 }}
            animate={{ scale: 1 }}
            transition={{ delay: 0.3, type: 'spring' }}
            className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
          >
            <div className="w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg">
              <Scale className="w-12 h-12 text-white" />
            </div>
          </motion.div>

          {/* 装饰元素 */}
          <motion.div
            animate={{ rotate: 360 }}
            transition={{ duration: 20, repeat: Infinity, ease: 'linear' }}
            className="absolute -top-10 -right-10 w-20 h-20 border-4 border-dashed border-gray-200 dark:border-gray-700 rounded-full"
          />
          <motion.div
            animate={{ rotate: -360 }}
            transition={{ duration: 15, repeat: Infinity, ease: 'linear' }}
            className="absolute -bottom-5 -left-5 w-16 h-16 border-4 border-dashed border-gray-200 dark:border-gray-700 rounded-full"
          />
        </motion.div>

        {/* 文字内容 */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.2 }}
        >
          <h1 className="text-3xl font-bold text-gray-900 dark:text-white mb-4">
            页面未找到
          </h1>
          <p className="text-gray-600 dark:text-gray-400 mb-8">
            抱歉，您访问的页面不存在或已被移除。
            <br />
            请检查链接是否正确，或返回首页继续浏览。
          </p>
        </motion.div>

        {/* 操作按钮 */}
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.4 }}
          className="flex flex-col sm:flex-row gap-4 justify-center"
        >
          <Link
            to="/"
            className="inline-flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors"
          >
            <Home className="w-5 h-5" />
            返回首页
          </Link>
          <button
            onClick={() => window.history.back()}
            className="inline-flex items-center justify-center gap-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"
          >
            <ArrowLeft className="w-5 h-5" />
            返回上一页
          </button>
        </motion.div>

        {/* 搜索建议 */}
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ delay: 0.6 }}
          className="mt-12"
        >
          <p className="text-sm text-gray-500 dark:text-gray-400 mb-3">
            或者试试搜索您需要的内容：
          </p>
          <div className="relative max-w-sm mx-auto">
            <Search className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
            <input
              type="text"
              placeholder="搜索法律问题..."
              className="w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"
            />
          </div>
        </motion.div>
      </div>
    </div>
  );
};
12.2 空状态组件
React

// frontend/src/components/common/EmptyState.tsx

import { motion } from 'framer-motion';
import { FileText, MessageSquare, Search, Inbox, Frown } from 'lucide-react';

interface EmptyStateProps {
  type?: 'default' | 'search' | 'messages' | 'documents' | 'error';
  title?: string;
  description?: string;
  action?: {
    label: string;
    onClick: () => void;
  };
}

const illustrations = {
  default: Inbox,
  search: Search,
  messages: MessageSquare,
  documents: FileText,
  error: Frown,
};

const defaultContent = {
  default: {
    title: '暂无数据',
    description: '这里还没有任何内容',
  },
  search: {
    title: '未找到结果',
    description: '尝试使用其他关键词进行搜索',
  },
  messages: {
    title: '暂无消息',
    description: '您还没有收到任何消息',
  },
  documents: {
    title: '暂无文档',
    description: '您还没有上传任何文档',
  },
  error: {
    title: '加载失败',
    description: '数据加载出现问题，请稍后重试',
  },
};

export const EmptyState: React.FC<EmptyStateProps> = ({
  type = 'default',
  title,
  description,
  action,
}) => {
  const Icon = illustrations[type];
  const content = defaultContent[type];

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      className="flex flex-col items-center justify-center py-16 px-4"
    >
      {/* 插图 */}
      <motion.div
        initial={{ scale: 0 }}
        animate={{ scale: 1 }}
        transition={{ delay: 0.1, type: 'spring' }}
        className="relative mb-6"
      >
        {/* 背景圆 */}
        <div className="w-32 h-32 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center">
          <Icon className="w-16 h-16 text-gray-400 dark:text-gray-500" />
        </div>
        
        {/* 装饰点 */}
        <motion.div
          animate={{ scale: [1, 1.2, 1] }}
          transition={{ duration: 2, repeat: Infinity }}
          className="absolute -top-2 -right-2 w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full"
        />
        <motion.div
          animate={{ scale: [1.2, 1, 1.2] }}
          transition={{ duration: 2, repeat: Infinity }}
          className="absolute -bottom-1 -left-1 w-4 h-4 bg-purple-100 dark:bg-purple-900/30 rounded-full"
        />
      </motion.div>

      {/* 文字 */}
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ delay: 0.2 }}
        className="text-center"
      >
        <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-2">
          {title || content.title}
        </h3>
        <p className="text-gray-500 dark:text-gray-400 max-w-sm">
          {description || content.description}
        </p>
      </motion.div>

      {/* 操作按钮 */}
      {action && (
        <motion.button
          initial={{ opacity: 0, y: 10 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.3 }}
          whileHover={{ scale: 1.05 }}
          whileTap={{ scale: 0.95 }}
          onClick={action.onClick}
          className="mt-6 px-6 py-2.5 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors"
        >
          {action.label}
        </motion.button>
      )}
    </motion.div>
  );
};
十三、前端设计建议总结
13.1 设计原则
Markdown

## 🎨 视觉设计原则

### 1. 一致性
- 统一的色彩系统、字体、间距
- 组件风格保持一致
- 交互反馈模式统一

### 2. 层次感
- 使用阴影和透明度创建深度
- 重要元素突出显示
- 合理的视觉权重分配

### 3. 动效克制
- 动画服务于功能
- 避免过度装饰性动效
- 保持 60fps 流畅度

### 4. 可访问性
- 足够的颜色对比度
- 支持键盘导航
- 适配屏幕阅读器
13.2 技术选型建议
TypeScript

// 推荐的前端技术栈

const techStack = {
  // 核心框架
  framework: 'React 19',
  language: 'TypeScript',
  bundler: 'Vite',
  
  // 样式方案
  styling: {
    solution: 'TailwindCSS',
    components: 'Radix UI + 自定义封装',
    animation: 'Framer Motion',
    icons: 'Lucide React',
  },
  
  // 状态管理
  state: {
    global: 'Zustand',
    server: 'TanStack Query',
    form: 'React Hook Form + Zod',
  },
  
  // 路由
  routing: 'React Router v6',
  
  // 工具库
  utilities: [
    'date-fns',           // 日期处理
    'clsx / class-variance-authority',  // 样式工具
    'react-hot-toast / sonner',         // 通知
    'react-virtuoso',     // 虚拟滚动
  ],
};
13.3 性能优化清单
Markdown

## ⚡ 性能优化检查清单

### 加载性能
- [ ] 路由懒加载
- [ ] 图片懒加载 + WebP 格式
- [ ] 字体优化（display: swap）
- [ ] 关键 CSS 内联
- [ ] 资源预加载

### 运行时性能
- [ ] 虚拟滚动（长列表）
- [ ] 防抖/节流
- [ ] useMemo / useCallback 优化
- [ ] React.memo 包装组件
- [ ] 避免不必要的重渲染

### 动画性能
- [ ] 使用 transform 和 opacity
- [ ] 启用 GPU 加速
- [ ] 避免触发重排
- [ ] 使用 will-change 提示

### 网络优化
- [ ] 请求合并
- [ ] 数据缓存
- [ ] 乐观更新
- [ ] 错误重试
13.4 实施路线图
Markdown

## 📅 前端升级实施计划

### Phase 1: 基础设施（1-2周）
- [ ] 设计系统搭建（色彩、字体、间距）
- [ ] 基础组件库（Button、Input、Card 等）
- [ ] 引入 Framer Motion
- [ ] 暗黑模式支持

### Phase 2: 核心页面（2-3周）
- [ ] 首页 Hero 区域重设计
- [ ] AI 咨询页面升级
- [ ] 新闻列表优化
- [ ] 移动端导航

### Phase 3: 交互优化（1-2周）
- [ ] 微交互动效
- [ ] 加载状态优化
- [ ] 错误处理优化
- [ ] Toast/Modal 组件

### Phase 4: 性能优化（1周）
- [ ] 代码分割
- [ ] 图片优化
- [ ] 缓存策略
- [ ] 性能监控